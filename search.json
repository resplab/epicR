[{"path":"/articles/AddingNewCountry.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Adding a New Country to epicR","text":"EPIC (Evaluation Platform COPD) originally developed Canadian healthcare context. However, model’s architecture supports adaptation different countries healthcare systems jurisdiction-specific configuration files. vignette explains add new country epicR.","code":""},{"path":"/articles/AddingNewCountry.html","id":"overview-of-the-configuration-system","dir":"Articles","previous_headings":"","what":"Overview of the Configuration System","title":"Adding a New Country to epicR","text":"epicR uses JSON configuration files store country-specific parameters. files contain epidemiological, demographic, economic, healthcare system parameters needed run model specific jurisdiction.","code":""},{"path":"/articles/AddingNewCountry.html","id":"current-configuration-files","dir":"Articles","previous_headings":"Overview of the Configuration System","what":"Current Configuration Files","title":"Adding a New Country to epicR","text":"inst/config/config_canada.json - Fully configured Canadian parameters inst/config/config_us.json - US template placeholders (requires configuration)","code":""},{"path":[]},{"path":"/articles/AddingNewCountry.html","id":"step-1-create-the-configuration-file","dir":"Articles","previous_headings":"Step-by-Step Guide to Adding a New Country","what":"Step 1: Create the Configuration File","title":"Adding a New Country to epicR","text":"Create new JSON configuration file country inst/config/ directory:","code":"# Example: Adding Germany file_name <- \"inst/config/config_germany.json\""},{"path":"/articles/AddingNewCountry.html","id":"step-2-copy-the-template-structure","dir":"Articles","previous_headings":"Step-by-Step Guide to Adding a New Country","what":"Step 2: Copy the Template Structure","title":"Adding a New Country to epicR","text":"Start copying structure existing configuration file. can use US template starting point:","code":"# Read the US template us_config <- jsonlite::fromJSON(\"inst/config/config_us.json\")  # Modify for Germany germany_config <- us_config germany_config$jurisdiction <- \"germany\"  # Save the template jsonlite::write_json(germany_config, \"inst/config/config_germany.json\",                       pretty = TRUE, auto_unbox = TRUE)"},{"path":"/articles/AddingNewCountry.html","id":"step-3-parameter-categories-to-configure","dir":"Articles","previous_headings":"Step-by-Step Guide to Adding a New Country","what":"Step 3: Parameter Categories to Configure","title":"Adding a New Country to epicR","text":"configuration file contains several major parameter categories need country-specific data:","code":""},{"path":"/articles/AddingNewCountry.html","id":"global-parameters","dir":"Articles","previous_headings":"Step-by-Step Guide to Adding a New Country > Step 3: Parameter Categories to Configure","what":"3.1 Global Parameters","title":"Adding a New Country to epicR","text":"Required data: - Discount rates costs QALYs (country-specific economic guidelines)","code":"{   \"global_parameters\": {     \"age0\": 40,     \"time_horizon\": 20,     \"discount_cost\": 0.03,     \"discount_qaly\": 0.03,     \"closed_cohort\": 0   } }"},{"path":"/articles/AddingNewCountry.html","id":"demographics-and-population","dir":"Articles","previous_headings":"Step-by-Step Guide to Adding a New Country > Step 3: Parameter Categories to Configure","what":"3.2 Demographics and Population","title":"Adding a New Country to epicR","text":"Required data sources: - Population demographics: National statistics office - Age pyramid: Current population age group - Life tables: Age sex-specific mortality rates - Anthropometric data: Height weight distributions age sex","code":"{   \"agent\": {     \"p_female\": 0.51,     \"height_0_betas\": [...],     \"weight_0_betas\": [...],     \"p_prevalence_age\": [...],     \"p_bgd_by_sex\": {       \"male\": [...],       \"female\": [...]     }   } }"},{"path":"/articles/AddingNewCountry.html","id":"smoking-patterns","dir":"Articles","previous_headings":"Step-by-Step Guide to Adding a New Country > Step 3: Parameter Categories to Configure","what":"3.3 Smoking Patterns","title":"Adding a New Country to epicR","text":"Required data sources: - Smoking prevalence: National health surveys - Smoking-related mortality: Meta-analyses national studies - Smoking cessation rates: Longitudinal studies","code":"{   \"smoking\": {     \"logit_p_current_smoker_0_betas\": [...],     \"minimum_smoking_prevalence\": 0.12,     \"mortality_factor_current\": [...],     \"mortality_factor_former\": [...]   } }"},{"path":"/articles/AddingNewCountry.html","id":"copd-epidemiology","dir":"Articles","previous_headings":"Step-by-Step Guide to Adding a New Country > Step 3: Parameter Categories to Configure","what":"3.4 COPD Epidemiology","title":"Adding a New Country to epicR","text":"Required data sources: - COPD prevalence: Spirometry-based population studies - COPD incidence: Longitudinal cohort studies - Risk factors: Smoking, age, sex associations","code":"{   \"COPD\": {     \"logit_p_COPD_betas_by_sex\": {       \"male\": [...],       \"female\": [...]     },     \"ln_h_COPD_betas_by_sex\": {       \"male\": [...],       \"female\": [...]     }   } }"},{"path":"/articles/AddingNewCountry.html","id":"healthcare-costs","dir":"Articles","previous_headings":"Step-by-Step Guide to Adding a New Country > Step 3: Parameter Categories to Configure","what":"3.5 Healthcare Costs","title":"Adding a New Country to epicR","text":"Required data sources: - Healthcare unit costs: National fee schedules health economics studies - COPD treatment costs: Health administrative data costing studies - Currency: Convert local currency standardize USD/EUR","code":"{   \"cost\": {     \"bg_cost_by_stage\": [...],     \"exac_dcost\": [...],     \"cost_gp_visit\": 85.50,     \"cost_outpatient_diagnosis\": 125.50,     \"cost_smoking_cessation\": 485.25   } }"},{"path":"/articles/AddingNewCountry.html","id":"healthcare-utilization","dir":"Articles","previous_headings":"Step-by-Step Guide to Adding a New Country > Step 3: Parameter Categories to Configure","what":"3.6 Healthcare Utilization","title":"Adding a New Country to epicR","text":"Required data sources: - Healthcare utilization patterns: Administrative health data - GP visit rates: Primary care databases","code":"{   \"outpatient\": {     \"ln_rate_gpvisits_COPD_by_sex\": {       \"male\": [...],       \"female\": [...]     }   } }"},{"path":[]},{"path":"/articles/AddingNewCountry.html","id":"essential-data-sources","dir":"Articles","previous_headings":"Step-by-Step Guide to Adding a New Country > Step 4: Data Collection Strategy","what":"Essential Data Sources","title":"Adding a New Country to epicR","text":"Population demographics Life tables Health surveys Healthcare utilization Treatment costs Disease prevalence Disease-specific studies Health economics evaluations Epidemiological studies Global Health Observatory OECD Health Statistics Global Burden Disease Study","code":""},{"path":"/articles/AddingNewCountry.html","id":"data-quality-considerations","dir":"Articles","previous_headings":"Step-by-Step Guide to Adding a New Country > Step 4: Data Collection Strategy","what":"Data Quality Considerations","title":"Adding a New Country to epicR","text":"Representativeness: Ensure data represents target population Recency: Use recent available data Consistency: Maintain consistent definitions across parameters Validation: Cross-check multiple sources possible","code":""},{"path":"/articles/AddingNewCountry.html","id":"step-5-parameter-estimation","dir":"Articles","previous_headings":"Step-by-Step Guide to Adding a New Country","what":"Step 5: Parameter Estimation","title":"Adding a New Country to epicR","text":"direct data available, parameters can estimated using:","code":""},{"path":"/articles/AddingNewCountry.html","id":"regression-models","dir":"Articles","previous_headings":"Step-by-Step Guide to Adding a New Country > Step 5: Parameter Estimation","what":"5.1 Regression Models","title":"Adding a New Country to epicR","text":"","code":"# Example: Estimating COPD prevalence coefficients # Using logistic regression on survey data model <- glm(copd ~ age + sex + smoking_status + pack_years,               data = survey_data, family = binomial()) coefficients(model)"},{"path":"/articles/AddingNewCountry.html","id":"literature-meta-analysis","dir":"Articles","previous_headings":"Step-by-Step Guide to Adding a New Country > Step 5: Parameter Estimation","what":"5.2 Literature Meta-analysis","title":"Adding a New Country to epicR","text":"Systematic review published studies Meta-analytic techniques pool estimates Adjustment population differences","code":""},{"path":"/articles/AddingNewCountry.html","id":"calibration","dir":"Articles","previous_headings":"Step-by-Step Guide to Adding a New Country > Step 5: Parameter Estimation","what":"5.3 Calibration","title":"Adding a New Country to epicR","text":"Use model calibration match observed outcomes Iterative adjustment parameters Validation external data sources","code":""},{"path":"/articles/AddingNewCountry.html","id":"step-6-testing-the-new-configuration","dir":"Articles","previous_headings":"Step-by-Step Guide to Adding a New Country","what":"Step 6: Testing the New Configuration","title":"Adding a New Country to epicR","text":"populated configuration file:","code":""},{"path":"/articles/AddingNewCountry.html","id":"test-loading","dir":"Articles","previous_headings":"Step-by-Step Guide to Adding a New Country > Step 6: Testing the New Configuration","what":"6.1 Test Loading","title":"Adding a New Country to epicR","text":"","code":"# Test that the configuration loads without errors library(epicR) input <- get_input(jurisdiction = \"germany\")"},{"path":"/articles/AddingNewCountry.html","id":"run-basic-simulation","dir":"Articles","previous_headings":"Step-by-Step Guide to Adding a New Country > Step 6: Testing the New Configuration","what":"6.2 Run Basic Simulation","title":"Adding a New Country to epicR","text":"","code":"# Run a small simulation to check for errors results <- simulate(   jurisdiction = \"germany\",   n_agents = 10000,   time_horizon = 5 ) print(results$basic)"},{"path":"/articles/AddingNewCountry.html","id":"validate-outputs","dir":"Articles","previous_headings":"Step-by-Step Guide to Adding a New Country > Step 6: Testing the New Configuration","what":"6.3 Validate Outputs","title":"Adding a New Country to epicR","text":"Compare population demographics national statistics Check COPD prevalence published estimates Validate healthcare utilization patterns","code":""},{"path":"/articles/AddingNewCountry.html","id":"step-7-documentation","dir":"Articles","previous_headings":"Step-by-Step Guide to Adding a New Country","what":"Step 7: Documentation","title":"Adding a New Country to epicR","text":"Create documentation new country configuration:","code":""},{"path":"/articles/AddingNewCountry.html","id":"data-sources-documentation","dir":"Articles","previous_headings":"Step-by-Step Guide to Adding a New Country > Step 7: Documentation","what":"7.1 Data Sources Documentation","title":"Adding a New Country to epicR","text":"","code":"# Create a data sources file data_sources <- list(   demographics = \"German Federal Statistical Office, 2023\",   copd_prevalence = \"BOLD Study Germany, 2022\",   healthcare_costs = \"German Health Economics Association, 2023\" )"},{"path":"/articles/AddingNewCountry.html","id":"parameter-assumptions","dir":"Articles","previous_headings":"Step-by-Step Guide to Adding a New Country > Step 7: Documentation","what":"7.2 Parameter Assumptions","title":"Adding a New Country to epicR","text":"Document assumptions approximations made parameter estimation.","code":""},{"path":"/articles/AddingNewCountry.html","id":"example-adding-germany","dir":"Articles","previous_headings":"","what":"Example: Adding Germany","title":"Adding a New Country to epicR","text":"’s simplified example adding Germany epicR:","code":"# 1. Create base configuration germany_config <- list(   jurisdiction = \"germany\",   global_parameters = list(     age0 = 40,     time_horizon = 20,     discount_cost = 0.03,  # German health economics guidelines     discount_qaly = 0.03,     closed_cohort = 0   ),   agent = list(     p_female = 0.507,  # German Federal Statistical Office 2023     # ... other parameters   ),   cost = list(     cost_gp_visit = 25.50,  # German fee schedule 2023     cost_outpatient_diagnosis = 85.40,     # ... other costs   )   # ... other parameter categories )  # 2. Save configuration jsonlite::write_json(germany_config,                       \"inst/config/config_germany.json\",                       pretty = TRUE, auto_unbox = TRUE)  # 3. Test the configuration library(epicR) input <- get_input(jurisdiction = \"germany\")"},{"path":[]},{"path":"/articles/AddingNewCountry.html","id":"validation-checklist","dir":"Articles","previous_headings":"Quality Assurance","what":"Validation Checklist","title":"Adding a New Country to epicR","text":"placeholder values replaced actual data Data sources documented Parameter ranges clinically plausible Model outputs match expected population patterns Healthcare costs reflect local context Currency units consistent","code":""},{"path":"/articles/AddingNewCountry.html","id":"common-issues-and-solutions","dir":"Articles","previous_headings":"Quality Assurance","what":"Common Issues and Solutions","title":"Adding a New Country to epicR","text":"Missing Data: Use proxy data similar countries systematic reviews Currency Conversion: Use purchasing power parity adjustments Different Healthcare Systems: Adapt utilization patterns local context Data Quality: Document limitations uncertainty","code":""},{"path":"/articles/AddingNewCountry.html","id":"contributing-your-configuration","dir":"Articles","previous_headings":"","what":"Contributing Your Configuration","title":"Adding a New Country to epicR","text":"’ve successfully created configuration new country: Validate thoroughly using local data Document data sources methods Consider contributing epicR project Share community peer review","code":""},{"path":"/articles/AddingNewCountry.html","id":"conclusion","dir":"Articles","previous_headings":"","what":"Conclusion","title":"Adding a New Country to epicR","text":"Adding new country epicR requires substantial data collection parameter estimation, modular configuration system makes process systematic reproducible. key ensure high-quality, country-specific data maintaining model’s scientific rigor. questions assistance adding new country, consider: - Reviewing published adaptations EPIC - Consulting local health economists - Engaging epicR development community - Collaborating researchers local data access","code":""},{"path":"/articles/BackgroundEPIC.html","id":"introduction","dir":"Articles","previous_headings":"","what":"1 Introduction","title":"EPIC Background","text":"Evaluation Platform COPD (EPIC) nationally funded research project aim creating open-source, publicly available, population-based ‘Whole Disease’ COPD model epidemiological projections policy analyses Canadian context.","code":""},{"path":"/articles/BackgroundEPIC.html","id":"the-study","dir":"Articles","previous_headings":"","what":"2 The Study","title":"EPIC Background","text":"epicR package application based paper Development Validation theEvaluation Platform COPD (EPIC):Population-Based Outcomes Modelof COPD Canada, published 2019.","code":""},{"path":"/articles/BackgroundEPIC.html","id":"background","dir":"Articles","previous_headings":"2 The Study","what":"2.1 Background","title":"EPIC Background","text":"purpose study model COPD (Chronic Obstructive Pulmonary Disease) affects whole population. social sciences population health, often use dynamic microsimulation model look disease might affect population period time.","code":""},{"path":"/articles/BackgroundEPIC.html","id":"what-is-a-dynamic-microsimulation","dir":"Articles","previous_headings":"2 The Study","what":"What is a Dynamic Microsimulation?","title":"EPIC Background","text":"dynamic microsimulation computer model makes predictions population affected say, disease, set period time. case EPIC, wanted look affects COPD Canadian population. start , computer model uses data 2001 Canadian Community Health Survey 1.1 create simulated, “artificial” people. survey included information 105 908 Canadians. model uses create ~ 22.5 million community-dwelling Canadians. real population, simulated population constantly changing. define change simulated individual event. Events EPIC: combined 12 different studies look 7 different aspects COPD: Demographic Risk Factor Module COPD Occurence Module Lung Function Module Exacerbation Module Mortality Module Payoff Module Smoking Module","code":""},{"path":"/articles/BackgroundEPIC.html","id":"demographic","dir":"Articles","previous_headings":"2 The Study","what":"Demographic and Risk Factor Module","title":"EPIC Background","text":"Demographic Risk Factor Module based results POHEM, dynamic microsimulation model described previously. basically background data simulation. Key Components:","code":""},{"path":"/articles/BackgroundEPIC.html","id":"occurence","dir":"Articles","previous_headings":"2 The Study","what":"COPD Occurence Module","title":"EPIC Background","text":"used data Canadian Cohort Obstructive Lung Disease (COLD) assign binary COPD status individuals upon creation. COPD Incidence Model: COPD Definition: Post-bronchodilator FEV₁/FVC ratio < 0.70 (GOLD criteria)","code":""},{"path":"/articles/BackgroundEPIC.html","id":"lungfunction","dir":"Articles","previous_headings":"2 The Study","what":"Lung Function Module","title":"EPIC Background","text":"COPD designation defined individual, individual-specific initial FEV₁ value individual-specific annual rate FEV₁ decline assigned. 3 components module initial FEV₁ value preexisting (prevalent) COPD cases, initial FEV₁ values incident COPD cases, slope decline FEV₁ time. Lung Function Components: FEV₁ Decline Factors: - Current smoking status (faster decline current smokers) - Age sex - Pack-years smoking history - Baseline FEV₁ level","code":""},{"path":"/articles/BackgroundEPIC.html","id":"exacerbation","dir":"Articles","previous_headings":"2 The Study","what":"Exacerbation Module","title":"EPIC Background","text":"COPD, patients can sometimes experience called exacerbations. Exacerbation Definition: Acute worsening COPD symptoms (shortness breath, wheezing, coughing mucus, etc.) requiring medical intervention.","code":""},{"path":"/articles/BackgroundEPIC.html","id":"exacerbation-severity","dir":"Articles","previous_headings":"2 The Study > Exacerbation Module","what":"Exacerbation Severity","title":"EPIC Background","text":"Exacerbation Model Parameters: Note: Hazard refers instantaneous exacerbation rate given time.","code":""},{"path":"/articles/BackgroundEPIC.html","id":"mortality","dir":"Articles","previous_headings":"2 The Study","what":"Mortality Module","title":"EPIC Background","text":"categorized death two categories: death COPD, death COPD. formally: COPD-related mortality: Death due severe severe COPD exacerbation Background mortality: Death causes (excluding COPD) Mortality Model Components: Case Fatality Rates: - Severe exacerbations: ~2-5% -hospital mortality - severe exacerbations (ICU): ~10-15% -hospital mortality - Rates increase age comorbidities","code":""},{"path":"/articles/BackgroundEPIC.html","id":"payoff","dir":"Articles","previous_headings":"2 The Study","what":"Payoff Module","title":"EPIC Background","text":"Like disease, COPD costs money treat, cost healthcare system. Additionally, COPD can reduce quality life, depends severity diagnosis number exacerbations. Cost Utility Categories: Payoff Model Parameters: Cost Ranges (CAD, 2015 dollars): - Mild exacerbation: ~$50-100 - Moderate exacerbation: ~$200-400 - Severe exacerbation: ~$5,000-10,000 - severe exacerbation (ICU): ~$15,000-30,000","code":""},{"path":"/articles/BackgroundEPIC.html","id":"smoking","dir":"Articles","previous_headings":"2 The Study","what":"Smoking Module","title":"EPIC Background","text":"module assesses impact smoking development progression COPD. Smoking status (e.g., current smoker, former smoker, never smoker) incorporated model account effect individual’s health trajectory. Smoking Model Components: Smoking Status Definitions: - Never smoker: < 100 cigarettes lifetime - Former smoker: ≥ 100 cigarettes lifetime, currently quit - Current smoker: Currently smoking Impact COPD: - Increased risk COPD incidence (dose-response relationship pack-years) - Faster FEV₁ decline current smokers - Higher exacerbation rates - Increased mortality risk - Reduced effectiveness treatments","code":""},{"path":"/articles/Calibrate_COPD_Exacerbations.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"Calibrate COPD Exacerbations","text":"document outlines calibration process undertaken align model’s outputs validation targets COPD exacerbations, using ACCEPT study, Hoogendorn et al 2021, CanCOLD.","code":""},{"path":"/articles/Calibrate_COPD_Exacerbations.html","id":"calibration-of-copd-exacerbation-rates","dir":"Articles","previous_headings":"","what":"Calibration of COPD Exacerbation Rates","title":"Calibrate COPD Exacerbations","text":"section outlines internal validation process conducted align model’s simulated COPD exacerbation rates empirical targets drawn key reference studies. validation focused diagnosed undiagnosed populations stratified GOLD stage exacerbation severity (total, moderate/severe, severe ). Detailed validation targets associated calibration code presented . Validation References: Ford et al. 2015 (DOI: 10.1378/chest.14-2146) Hoogendoorn et al. 2021 (DOI: 10.1183/09031936.00043710) Wallace et al. 2019 (DOI: 10.18553/jmcp.2019.25.2.205) CanCOLD study (DOI: 10.3109/15412555.2012.665520)","code":""},{"path":[]},{"path":"/articles/Calibrate_COPD_Exacerbations.html","id":"total-rate-of-exacerbation-per-100000-individuals-ford-et-al--2015","dir":"Articles","previous_headings":"Calibration of COPD Exacerbation Rates > Validation Targets","what":"Total Rate of Exacerbation per 100,000 individuals (Ford et al. 2015)","title":"Calibrate COPD Exacerbations","text":"Ford et al. 2015 reported age-specific hospitalization rates COPD provide aggregated rate adults aged >40 years. estimate available, combined rate derived best available evidence population-level measure COPD-related hospitalizations per 100,000 individuals age group. calculate estimate, age-specific hospitalization rates reported Table 1 Ford et al. 2015 weighted U.S. Census population counts 2012. Rates reported Table 1 per 100,000 276.9 ages 45–64, 939.4 ages 65–84, 1,181.2 ages ≥85. rate multiplied corresponding population size U.S. Census population numbers 2012 (81.5 million, 35.0 million, 5.9 million, respectively) obtain expected number hospitalizations within strata. values summed divided total population aged >40 years (122.4 million), scaled per 100,000. resulting combined hospitalization rate approximately 510 per 100,000 individuals aged >40 years 2012. Total Exacerbation Rate: 510 per 100,000 individuals","code":""},{"path":"/articles/Calibrate_COPD_Exacerbations.html","id":"diagnosed-patients-total-exacerbation-rate-hoogendoorn-et-al--2021","dir":"Articles","previous_headings":"Calibration of COPD Exacerbation Rates > Validation Targets","what":"Diagnosed Patients – Total Exacerbation Rate (Hoogendoorn et al. 2021)","title":"Calibrate COPD Exacerbations","text":"Simulated rates compared reported Hoogendoorn et al. 2021: - GOLD 1: 0.82 - GOLD 2: 1.17 - GOLD 3: 1.61 - GOLD 4: 2.10","code":""},{"path":"/articles/Calibrate_COPD_Exacerbations.html","id":"diagnosed-patients-moderate-and-severe-exacerbation-rates-wallace-et-al--2019-study","dir":"Articles","previous_headings":"Calibration of COPD Exacerbation Rates > Validation Targets","what":"Diagnosed Patients – Moderate and Severe Exacerbation Rates (Wallace et al. 2019 Study)","title":"Calibrate COPD Exacerbations","text":"Wallace et al. 2019 provided target rates moderate severe exacerbations: - GOLD 1: 0.404 - GOLD 2: 0.489 - GOLD 3: 0.836 - GOLD 4: 0.891","code":""},{"path":"/articles/Calibrate_COPD_Exacerbations.html","id":"diagnosed-patients-severe-exacerbation-rates-wallace-et-al--2019-study","dir":"Articles","previous_headings":"Calibration of COPD Exacerbation Rates > Validation Targets","what":"Diagnosed Patients – Severe Exacerbation Rates (Wallace et al. 2019 Study)","title":"Calibrate COPD Exacerbations","text":"Wallace et al. 2019 provided target rates severe exacerbations: - GOLD 1: 0.12 - GOLD 2: 0.139 - GOLD 3: 0.254 - GOLD 4: 0.422","code":""},{"path":"/articles/Calibrate_COPD_Exacerbations.html","id":"undiagnosed-patients-total-exacerbation-rate-cancold","dir":"Articles","previous_headings":"Calibration of COPD Exacerbation Rates > Validation Targets","what":"Undiagnosed Patients – Total Exacerbation Rate (CanCOLD)","title":"Calibrate COPD Exacerbations","text":"undiagnosed subgroup, exacerbation rates benchmarked CanCOLD data: - Total population: 0.30 - GOLD 1: 0.24 - GOLD 2+: 0.40","code":""},{"path":"/articles/Calibrate_COPD_Exacerbations.html","id":"overall-and-gold-stratified-total-exacerbation-rates-cancold","dir":"Articles","previous_headings":"Calibration of COPD Exacerbation Rates > Validation Targets","what":"Overall and GOLD-Stratified Total Exacerbation Rates (CanCOLD)","title":"Calibrate COPD Exacerbations","text":"individuals (diagnosed undiagnosed), total exacerbation rates per year compared CanCOLD study benchmarks: - Total population: 0.39 - GOLD 1: 0.28 - GOLD 2+: 0.53 calibration code performs relevant calculations visualizations validation target.","code":""},{"path":"/articles/Calibrate_COPD_Exacerbations.html","id":"step-1-load-libraries-and-setup","dir":"Articles","previous_headings":"Calibration of COPD Exacerbation Rates","what":"Step 1: Load libraries and setup","title":"Calibrate COPD Exacerbations","text":"","code":"library(tidyverse) library(epicR) library(ggthemes) library(scales) library(ggplot2) library(dplyr) library(tidyr) library(reshape2)  # Define event codes EVENT_EXACERBATION <- 5 EVENT_END <- 11  # Updated event_end code after MI/stroke/HF removal  # Load EPIC general settings settings <- get_default_settings() settings$record_mode <- 2 settings$n_base_agents <- 3.5e6 init_session(settings = settings)  # Load input with US config (change to \"canada\" for Canadian parameters) input <- get_input(jurisdiction = \"us\") time_horizon <- 26  # Modify intercept value to calibrate proportion of COPD exacerbations input$values$exacerbation$ln_rate_betas <- t(as.matrix(c(intercept = 1.8, female = 0, age = 0.04082 * 0.1, fev1 = -1.5, smoking_status = 0.7, gold1 = 0.15 , gold2 = -0.10 , gold3 = -0.40 , gold4 = -0.75 , diagnosis_effect = 0))) input$values$exacerbation$logit_severity_betas = t(as.matrix(c(intercept1 = -0.309, intercept2 = 2.502, intercept3 = 5.508, female = -0.764, age = -0.007, fev1 = 0.98, smoking_status = 0.348, pack_years = -0.001 , BMI = 0.018)))  # Run the model run(input = input$values) op <- Cget_output() output_ex <- Cget_output_ex()  all_events <- as.data.frame(Cget_all_events_matrix()) exac_events <- subset(all_events, event == EVENT_EXACERBATION) exit_events <- subset(all_events, event == EVENT_END)  Follow_up_GOLD <- c(0, 0, 0, 0) last_GOLD_transition_time <- 0 for (i in 2:dim(all_events)[1]) {   if (all_events[i, \"id\"] != all_events[i - 1, \"id\"])     last_GOLD_transition_time <- 0   if ((all_events[i, \"id\"] == all_events[i - 1, \"id\"]) & (all_events[i, \"gold\"] != all_events[i - 1, \"gold\"])) {     Follow_up_GOLD[all_events[i - 1, \"gold\"]] = Follow_up_GOLD[all_events[i - 1, \"gold\"]] + all_events[i - 1, \"followup_after_COPD\"] -       last_GOLD_transition_time     last_GOLD_transition_time <- all_events[i - 1, \"followup_after_COPD\"]   }   if (all_events[i, \"event\"] == EVENT_END)     Follow_up_GOLD[all_events[i, \"gold\"]] = Follow_up_GOLD[all_events[i, \"gold\"]] + all_events[i, \"followup_after_COPD\"] -       last_GOLD_transition_time }   #----------------------------DIAGNOSED ------------------------------------ #-------------------------------------------------------------------------  all_events_diagnosed          <- subset(all_events, diagnosis > 0 & gold > 0 ) exac_events_diagnosed         <- subset(all_events_diagnosed, event == EVENT_EXACERBATION ) sev_exac_events_diagnosed    <- subset(all_events_diagnosed, event == EVENT_EXACERBATION & (exac_status == 3 | exac_status == 4) ) mod_sev_exac_events_diagnosed <- subset(all_events_diagnosed, event == EVENT_EXACERBATION & (exac_status == 3 | exac_status == 4 | exac_status == 2) ) exit_events_diagnosed         <- subset(all_events_diagnosed, event == EVENT_END)  Follow_up_GOLD_diagnosed <- c(0, 0, 0, 0) last_GOLD_transition_time_diagnosed <- 0 for (i in 2:dim(all_events_diagnosed)[1]) {   if ((all_events_diagnosed[i, \"id\"] != all_events_diagnosed[i - 1, \"id\"]))     last_GOLD_transition_time_diagnosed <- 0   if ((all_events_diagnosed[i, \"id\"] == all_events_diagnosed[i - 1, \"id\"]) & (all_events_diagnosed[i, \"gold\"] != all_events_diagnosed[i - 1, \"gold\"])) {     Follow_up_GOLD_diagnosed[all_events_diagnosed[i - 1, \"gold\"]] = Follow_up_GOLD_diagnosed[all_events_diagnosed[i - 1, \"gold\"]] + (all_events_diagnosed[i - 1, \"local_time\"]-all_events_diagnosed[i - 1, \"time_at_diagnosis\"]) -       last_GOLD_transition_time_diagnosed     last_GOLD_transition_time_diagnosed <- (all_events_diagnosed[i - 1, \"local_time\"]-all_events_diagnosed[i - 1, \"time_at_diagnosis\"])   }   if (all_events_diagnosed[i, \"event\"] == EVENT_END)     Follow_up_GOLD_diagnosed[all_events_diagnosed[i, \"gold\"]] = Follow_up_GOLD_diagnosed[all_events_diagnosed[i, \"gold\"]] + (all_events_diagnosed[i, \"local_time\"]-all_events_diagnosed[i, \"time_at_diagnosis\"]) -       last_GOLD_transition_time_diagnosed }  #----------------------------UNDIAGNOSED ------------------------------------ #-------------------------------------------------------------------------  all_events_undiagnosed          <- subset(all_events, diagnosis == 0 & gold > 0 & gold < 3) #CanCOLD is only GOLD 1 and 2 exac_events_undiagnosed         <- subset(all_events_undiagnosed, event == EVENT_EXACERBATION ) sev_exac_events_undiagnosed     <- subset(all_events_undiagnosed, event == EVENT_EXACERBATION & (exac_status == 3 | exac_status == 4) ) mod_sev_exac_events_undiagnosed <- subset(all_events_undiagnosed, event == EVENT_EXACERBATION & (exac_status == 3 | exac_status == 4 | exac_status == 2) ) exit_events_undiagnosed         <- subset(all_events_undiagnosed, event == EVENT_END)  Follow_up_GOLD_undiagnosed <- c(0, 0, 0, 0) last_GOLD_transition_time_undiagnosed <- 0 for (i in 2:dim(all_events_undiagnosed)[1]) {   if ((all_events_undiagnosed[i, \"id\"] != all_events_undiagnosed[i - 1, \"id\"]))     last_GOLD_transition_time_undiagnosed <- 0   if ((all_events_undiagnosed[i, \"id\"] == all_events_undiagnosed[i - 1, \"id\"]) & (all_events_undiagnosed[i, \"gold\"] != all_events_undiagnosed[i - 1, \"gold\"])) {     Follow_up_GOLD_undiagnosed[all_events_undiagnosed[i - 1, \"gold\"]] = Follow_up_GOLD_undiagnosed[all_events_undiagnosed[i - 1, \"gold\"]] + (all_events_undiagnosed[i - 1, \"local_time\"]-all_events_undiagnosed[i - 1, \"time_at_diagnosis\"]) -       last_GOLD_transition_time_undiagnosed     last_GOLD_transition_time_undiagnosed <- (all_events_undiagnosed[i - 1, \"local_time\"]-all_events_undiagnosed[i - 1, \"time_at_diagnosis\"])   }   if (all_events_undiagnosed[i, \"event\"] == EVENT_END)     Follow_up_GOLD_undiagnosed[all_events_undiagnosed[i, \"gold\"]] = Follow_up_GOLD_undiagnosed[all_events_undiagnosed[i, \"gold\"]] + (all_events_undiagnosed[i, \"local_time\"]-all_events_undiagnosed[i, \"time_at_diagnosis\"]) -       last_GOLD_transition_time_undiagnosed }  terminate_session()  #----------------------------All ------------------------------------ #-------------------------------------------------------------------------  message(\"Exacerbation Rates per GOLD stages for all patients:\")  GOLD_I   <- (as.data.frame(table(exac_events[, \"gold\"]))[1, 2]/Follow_up_GOLD[1]) GOLD_II  <- (as.data.frame(table(exac_events[, \"gold\"]))[2, 2]/Follow_up_GOLD[2]) GOLD_III <- (as.data.frame(table(exac_events[, \"gold\"]))[3, 2]/Follow_up_GOLD[3]) GOLD_IV  <- (as.data.frame(table(exac_events[, \"gold\"]))[4, 2]/Follow_up_GOLD[4])  message(paste0(\"exacRateGOLDI   = \", round(GOLD_I  , 2))) message(paste0(\"exacRateGOLDII  = \", round(GOLD_II , 2))) message(paste0(\"exacRateGOLDIII = \", round(GOLD_III, 2))) message(paste0(\"exacRateGOLDIV  = \", round(GOLD_IV , 2)))   #----------------------------All ------------------------------------ #------------------------------------------------------------------------- total_rate <- round(nrow(exac_events)/sum(Follow_up_GOLD), 2) Exac_per_GOLD <- matrix (NA, nrow = 3, ncol =3) colnames(Exac_per_GOLD) <- c(\"GOLD\", \"EPIC\", \"CanCOLD\") # CanCOLD only available for GOLD 1 and 2. See doi: 10.1164/rccm.201509-1795OC  Follow_up_GOLD_all_2level <- c(Follow_up_GOLD[1], Follow_up_GOLD[2]) # Because CanCOLD is mostly GOLD2, here we compare EPIC's GOLD2 only instead of GOLD2+ #  Follow_up_GOLD_all_2level <- c(Follow_up_GOLD[1], sum(Follow_up_GOLD[2:4])) GOLD_counts_all       <- as.data.frame(table(exac_events[, \"gold\"]))[, 2] GOLD_counts_all       <- c(GOLD_counts_all[1], sum(GOLD_counts_all[2:4]))  Exac_per_GOLD[1:3, 1] <- c(\"total\", \"gold1\", \"gold2+\") Exac_per_GOLD[1:3, 2] <- c(total_rate,                            round(x=GOLD_counts_all/Follow_up_GOLD_all_2level,                                  digit = 2)) Exac_per_GOLD[1:3, 3] <- c(0.39, 0.28, 0.53)  df <- as.data.frame(Exac_per_GOLD) dfm <- melt(df[,c(\"GOLD\", \"EPIC\", \"CanCOLD\")],id.vars = 1) plot <-   ggplot(dfm, aes(x = GOLD, y = as.numeric(value))) +   scale_y_continuous(breaks = seq(0, 3, by = 0.5)) +   theme_tufte(base_size=14, ticks=F)  +   geom_bar(aes(fill = variable), stat = \"identity\", position = \"dodge\") +   ylab (\"Rate\") +   labs(caption = \"Total rate of exacerbations per year for all patients\")  print(plot)  #--------------------------- total number of severe exacerbations:  n_exac <- data.frame(year= 1:20,Severe_Exacerbations = (output_ex$n_exac_by_ctime_severity[,3]+output_ex$n_exac_by_ctime_severity[,4])* (100000/rowSums(output_ex$n_alive_by_ctime_sex))) avgRate_sevExac <- mean(n_exac$Severe_Exacerbations[round(nrow(n_exac)/2,0):nrow(n_exac)]) avgRate_sevExac <- round(avgRate_sevExac, 2) message(paste0(\"Average rate during 20 years: \", avgRate_sevExac))  rate2017_sevExac <-(output_ex$n_exac_by_ctime_severity[3,3]+output_ex$n_exac_by_ctime_severity[3,4])*(100000/sum(output_ex$n_alive_by_ctime_sex[3,])) rate2017_sevExac <- round(rate2017_sevExac, 2) message(paste0(\"Rate in 2017: \", rate2017_sevExac))   #----------------------------Diagnosed ------------------------------------ #-------------------------------------------------------------------------  Exac_per_GOLD_diagnosed <- matrix (NA, nrow = 4, ncol = 3) colnames(Exac_per_GOLD_diagnosed) <- c(\"GOLD\", \"EPIC\", \"Hoogendoorn\") # ACCEPT data is rates from a join of ECLIPSE, MACRO, OPTIMAL and STATCOPE. Exac_per_GOLD_diagnosed[1:4, 1] <- c(\"gold1\", \"gold2\", \"gold3\", \"gold4\") Exac_per_GOLD_diagnosed[1:4, 2] <- round(   x=as.data.frame(table(exac_events_diagnosed[, \"gold\"]))[, 2]/     Follow_up_GOLD_diagnosed, digit = 2) Exac_per_GOLD_diagnosed[1:4, 3] <- c(0.82, 1.17, 1.61, 2.10)  df <- as.data.frame(Exac_per_GOLD_diagnosed) dfm <- melt(df[,c(\"GOLD\", \"EPIC\", \"Hoogendoorn\")],id.vars = 1) plot <- ggplot(dfm, aes(x = GOLD, y = as.numeric(value))) +   scale_y_continuous(breaks = seq(0, 3, by = 0.5)) +   theme_tufte(base_size=14, ticks=F)  +   geom_bar(aes(fill = variable), stat = \"identity\", position = \"dodge\") +   ylab (\"Rate\") +   labs(caption = \"Total rate of exacerbations per year for diagnosed patients\") print(plot)  message(\"Total rate of exacerbation in diagnosed patients (1.5 per year in Hoogendoorn): \", round(nrow(exac_events_diagnosed)/sum(Follow_up_GOLD_diagnosed), 2))   #----------------------------Diagnosed Moderate and Severe------------------------------------ #-------------------------------------------------------------------------  Exac_per_GOLD_diagnosed <- matrix (NA, nrow = 4, ncol = 3) colnames(Exac_per_GOLD_diagnosed) <- c(\"GOLD\", \"EPIC\", \"Wallace 2019\")  Exac_per_GOLD_diagnosed[1:4, 1] <- c(\"gold1\", \"gold2\", \"gold3\", \"gold4\") Exac_per_GOLD_diagnosed[1:4, 2] <- round(   x=as.data.frame(table(mod_sev_exac_events_diagnosed[, \"gold\"]))[, 2]/     Follow_up_GOLD_diagnosed, digit = 2) Exac_per_GOLD_diagnosed[1:4, 3] <- c(0.404, 0.489, 0.836, 0.891)  df <- as.data.frame(Exac_per_GOLD_diagnosed) dfm <- melt(df[,c(\"GOLD\", \"EPIC\", \"Wallace 2019\")],id.vars = 1) plot <-   ggplot(dfm, aes(x = GOLD, y = as.numeric(value))) +   scale_y_continuous(breaks = seq(0, 3, by = 0.5)) +   theme_tufte(base_size=14, ticks=F)  +   geom_bar(aes(fill = variable), stat = \"identity\", position = \"dodge\") +   ylab (\"Rate\") +   labs(caption = \"Total rate of moderate/severe exacerbations per year for diagnosed patients\")  print(plot)   #----------------------------Diagnosed Severe------------------------------------ #-------------------------------------------------------------------------  Exac_per_GOLD_diagnosed <- matrix (NA, nrow = 4, ncol = 3) colnames(Exac_per_GOLD_diagnosed) <- c(\"GOLD\", \"EPIC\", \"Wallace 2019\")  Exac_per_GOLD_diagnosed[1:4, 1] <- c(\"gold1\", \"gold2\", \"gold3\", \"gold4\") Exac_per_GOLD_diagnosed[1:4, 2] <- round(   x=as.data.frame(table(sev_exac_events_diagnosed[, \"gold\"]))[, 2]/     Follow_up_GOLD_diagnosed, digit = 2) Exac_per_GOLD_diagnosed[1:4, 3] <- c(0.12, 0.139, 0.254, 0.422)  df <- as.data.frame(Exac_per_GOLD_diagnosed) dfm <- melt(df[,c(\"GOLD\", \"EPIC\", \"Wallace 2019\")],id.vars = 1) plot <-   ggplot(dfm, aes(x = GOLD, y = as.numeric(value))) +   scale_y_continuous(breaks = seq(0, 3, by = 0.5)) +   theme_tufte(base_size=14, ticks=F)  +   geom_bar(aes(fill = variable), stat = \"identity\", position = \"dodge\") +   ylab (\"Rate\") +   labs(caption = \"Total rate of severe exacerbations per year for diagnosed patients\")  print(plot)  #----------------------------Undiagnosed ------------------------------------ #---------------------------------------------------------------------------- total_rate_undiagnosed <- round(nrow(exac_events_undiagnosed)/sum(Follow_up_GOLD_undiagnosed), 2) Exac_per_GOLD_undiagnosed <- matrix (NA, nrow = 3, ncol = 3) colnames(Exac_per_GOLD_undiagnosed) <- c(\"GOLD\", \"EPIC\", \"CanCOLD\") Exac_per_GOLD_undiagnosed[1:3, 1] <- c(\"total\", \"gold1\", \"gold2+\")  Follow_up_GOLD_undiagnosed_2level <- c(Follow_up_GOLD_undiagnosed[1],                                        Follow_up_GOLD_undiagnosed[2]) #Because CANCold is mostly GOLD2, we comprare to GOLD2 EPIC #Follow_up_GOLD_undiagnosed_2level <- c(Follow_up_GOLD_undiagnosed[1], sum(Follow_up_GOLD_undiagnosed[2:4])) GOLD_counts_undiagnosed   <- as.data.frame(table(exac_events_undiagnosed[, \"gold\"]))[, 2] GOLD_counts_undiagnosed   <- c(GOLD_counts_undiagnosed[1],                                GOLD_counts_undiagnosed[2])   Exac_per_GOLD_undiagnosed[1:3, 2] <- c(total_rate_undiagnosed,                                        round(x=GOLD_counts_undiagnosed/Follow_up_GOLD_undiagnosed_2level, digit = 2)) Exac_per_GOLD_undiagnosed[1:3, 3] <- c(0.30, 0.24, 0.40)  df <- as.data.frame(Exac_per_GOLD_undiagnosed) dfm <- melt(df[,c(\"GOLD\", \"EPIC\", \"CanCOLD\")],id.vars = 1) plot <-   ggplot(dfm, aes(x = GOLD, y = as.numeric(value))) +   scale_y_continuous(breaks = seq(0, 3, by = 0.5)) +   theme_tufte(base_size=14, ticks=F)  +   geom_bar(aes(fill = variable), stat = \"identity\", position = \"dodge\") +   ylab (\"Rate\") +   labs(caption = \"Total rate of exacerbations per year for undiagnosed patients\") print(plot)  message(\"Total rate of exacerbation in undiagnosed patients (0.30 per year in CanCOLD): \",         total_rate_undiagnosed)"},{"path":"/articles/Calibrate_COPD_Prevalence.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"Calibrate COPD Prevalence","text":"document outlines calibration process undertaken align model’s outputs U.S.-based validation targets COPD prevalence, using NHANES data COPD defined according Lower Limit Normal (LLN) definition. calibration conducted 25-year simulation time horizon. Validation Reference: Tilert et al. 2013 (DOI: 10.1186/1465-9921-14-103) Validation Target (Age-Specific Prevalence): - 40–59 years: 8.1% - 60–79 years: 14.4% Validation Target (Sex-Specific Prevalence): - Males: 12.0% - Females: 8.6% important note EPIC model simulates individuals aged 40 older, including ≥80 years, whereas Tilert et al. 2013 included individuals aged 40–79. Given limitation, calibration emphasized preserving sex-specific prevalence ratio observed Tilert et al. 2013 (1.4:1; 12.0% males vs. 8.6% females) validation target. model deemed adequately calibrated ratio maintained, even absolute prevalence values sex differed slightly due inclusion older age groups. Evolution LLN Reference Equations Impact COPD Prevalence Estimation Reference equations used define LLN spirometry diagnose COPD evolved time, moving race-specific models toward inclusive, race-neutral approaches. Tilert et al. 2013 defined COPD using LLN values derived Hankinson equation, race-specific model widely used earlier guidelines. contrast, current guidelines recommend using Global Lung Function Initiative (GLI) race-neutral reference equations. recent analysis Cadham et al. 2024 (DOI: 10.1186/s12931-024-02841-y) compared COPD prevalence estimates based Hankinson GLI race-neutral equations found significant differences two approaches.","code":""},{"path":"/articles/Calibrate_COPD_Prevalence.html","id":"step-1-load-libraries-and-setup","dir":"Articles","previous_headings":"","what":"Step 1: Load libraries and setup","title":"Calibrate COPD Prevalence","text":", load necessary libraries. also set default simulation settings specify time horizon simulation (25 years).","code":"library(epicR) library(ggplot2) library(dplyr) library(knitr)  # Load EPIC general settings settings <- get_default_settings() settings$record_mode <- 0 settings$n_base_agents <- 1e5 init_session(settings = settings) ## [1] 0 input <- get_input(jurisdiction = \"us\") time_horizon <- 26 input$values$global_parameters$time_horizon <- time_horizon"},{"path":"/articles/Calibrate_COPD_Prevalence.html","id":"step-2-modify-intercept-value-to-calibrate-proportion-of-copd-prevalence-by-age-group-and-sex","dir":"Articles","previous_headings":"","what":"Step 2: Modify intercept value to calibrate proportion of COPD prevalence by age group and sex","title":"Calibrate COPD Prevalence","text":"sex-specific intercepts adjusted match age-specific prevalence targets (age groups: 40–59 60–79 years) maintaining 1.4:1 male--female ratio.","code":"input$values$COPD$logit_p_COPD_betas_by_sex <- cbind(male = c(intercept = -4.30190, age = 0.033070, age2 = 0, pack_years = 0.025049   ,                                                        current_smoking = 0, year = 0, asthma = 0),                                               female = c(intercept = -4.40202, age = 0.027359   , age2 = 0, pack_years=0.030399,                                                         current_smoking = 0, year = 0, asthma = 0))"},{"path":"/articles/Calibrate_COPD_Prevalence.html","id":"step-3-run-epic","dir":"Articles","previous_headings":"","what":"Step 3: Run EPIC","title":"Calibrate COPD Prevalence","text":"","code":"# Run EPIC simulation run(input = input$values) ## Using user config file from: /home/runner/.epicR/config/config_canada.json ## Running EPIC model (with custom input parameters) ## Record mode: record_mode_none (0) ## Note: No events will be recorded. Use record_mode_event (2) or record_mode_agent (1) to record events. ## Simulating 100000 base agents: 10% 20% 30% 40% 50% ## 60% 70% 80% 90% 100% ## [1] 0 output <- Cget_output_ex() terminate_session() ## Terminating the session ## [1] 0"},{"path":"/articles/Calibrate_COPD_Prevalence.html","id":"step-4-create-data-tables-by-age-category","dir":"Articles","previous_headings":"","what":"Step 4: Create data tables by age category","title":"Calibrate COPD Prevalence","text":"COPD Prevalence Age Group Time","code":"# Determine overall COPD prevalence  COPDprevalence_ctime_age<-output$n_COPD_by_ctime_age COPDprevalence_ctime_age<-as.data.frame(output$n_COPD_by_ctime_age) totalpopulation<-output$n_alive_by_ctime_age  # Overall prevalence of COPD  alive_age_all <- rowSums(output$n_alive_by_ctime_age[1:26, 40:111]) COPD_age_all <- rowSums (output$n_COPD_by_ctime_age[1:26, 40:111]) prevalenceCOPD_age_all <- COPD_age_all / alive_age_all  # Prevalence by age 40-59   alive_age_40to59 <- rowSums(output$n_alive_by_ctime_age[1:26, 40:59]) COPD_age_40to59 <-rowSums(output$n_COPD_by_ctime_age[1:26, 40:59]) prevalenceCOPD_age_40to59 <- COPD_age_40to59 / alive_age_40to59  # Prevalence by age 60-79  alive_age_60to79 <- rowSums(output$n_alive_by_ctime_age[1:26, 60:79]) COPD_age_60to79 <-rowSums(output$n_COPD_by_ctime_age[1:26, 60:79]) prevalenceCOPD_age_60to79 <- COPD_age_60to79 / alive_age_60to79  # Prevalence by age 80+  alive_age_over80 <- rowSums(output$n_alive_by_ctime_age[1:26, 80:111]) COPD_age_over80 <-rowSums(output$n_COPD_by_ctime_age[1:26, 80:111]) prevalenceCOPD_age_over80 <- COPD_age_over80 / alive_age_over80  # Display summary of COPD prevalence by age group   COPD_prevalence_summary <- data.frame(   Year = 2015:2040,   Prevalence_all = prevalenceCOPD_age_all,   Prevalence_40to59 = prevalenceCOPD_age_40to59,   Prevalence_60to79 = prevalenceCOPD_age_60to79,   Prevalence_over80 = prevalenceCOPD_age_over80   )  kable(COPD_prevalence_summary,        caption = \"COPD Prevalence by Age Group Over Time\",       digits = 3)"},{"path":"/articles/Calibrate_COPD_Prevalence.html","id":"step-5-visualize-data-by-age-category","dir":"Articles","previous_headings":"","what":"Step 5: Visualize data by age category","title":"Calibrate COPD Prevalence","text":"COPD prevalence projected decline moderately 2025 2050, reported Boers et al. 2023 (DOI: 10.1001/jamanetworkopen.2023.46598). similar trend observed EPIC model projections overall COPD prevalence. However, limitation EPIC include underestimating size population aged 80 older. COPD prevalence increases age, results overestimation overall COPD prevalence simulated population. COPD prevalence age groups  COPD prevalence age 40 59  COPD prevalence age 60 79  COPD prevalence age 80+","code":""},{"path":"/articles/Calibrate_COPD_Prevalence.html","id":"step-6-create-data-tables-by-sex-to-check-if-gender-distribution-matches-tilert-et-al-2013-doi10-11861465-9921-14-103","dir":"Articles","previous_headings":"","what":"Step 6: Create data tables by sex to check if gender distribution matches Tilert et al 2013 (doi:10.1186/1465-9921-14-103))","title":"Calibrate COPD Prevalence","text":"COPD Prevalence Sex Time","code":"# Calculate COPD prevalence by sex over time  alive_sex <- output$n_alive_by_ctime_sex COPD_sex <- output$n_COPD_by_ctime_sex prevalenceCOPD_sex <- COPD_sex / alive_sex prevalenceCOPD_sex<-as.data.frame (prevalenceCOPD_sex)  # Rename columns colnames(prevalenceCOPD_sex) <- c(\"Male\", \"Female\") prevalenceCOPD_sex$Year <- 2015:2040   # Display summary of COPD prevalence by sex  kable(prevalenceCOPD_sex,   caption = \"COPD Prevalence by Sex Over Time\",   digits = 3 )"},{"path":[]},{"path":"/articles/Calibrate_Demographics.html","id":"step-1load-libraries-and-setup","dir":"Articles","previous_headings":"","what":"Step 1:Load Libraries and Setup","title":"Calibrate Demographics","text":", load necessary libraries. also set default simulation settings specify time horizon simulation (56 years).","code":"library(epicR) library(tidyverse)  USSimulation <- read_csv(system.file(\"USCensus.csv\", package = \"epicR\"))                           settings <- get_default_settings() settings$record_mode <- 0 settings$n_base_agents <- settings$n_base_agents  input <- get_input(jurisdiction = \"us\") time_horizon <- 56 input$values$global_parameters$time_horizon <- time_horizon"},{"path":"/articles/Calibrate_Demographics.html","id":"step-2-define-the-rmse-calculation-function","dir":"Articles","previous_headings":"","what":"Step 2: Define the RMSE Calculation Function","title":"Calibrate Demographics","text":"calculate_rmse_optim function calculates RMSE iteration parameter optimization. Within function: assign first three values parameter vector (params[1:3]) l_inc_betas, represents parameters longevity equation. next four values (params[4:7]) assigned ln_h_bgd_betas vector, part incidence equation. 3)model run using updated parameters, extract projected population sizes (EPIC_popsize) calculate RMSE projected observed U.S. population data specified age ranges.","code":"# RMSE function for optimization calculate_rmse_optim <- function(params) {     init_session(settings = settings)    #assigning first 3 values to l_inc_betas   input$values$agent$l_inc_betas <- params[1:3]    # assigning the next 4 values to the first four ln_h_bgd_betas, others = 0   input$values$agent$ln_h_bgd_betas <- c(     intercept = params[4],     y = params[5],     y2 = params[6],     age = params[7],     b_mi = 0,     n_mi = 0,     b_stroke = 0,     n_stroke = 0,     hf = 0   )     run(input=input$values)   output <- Cget_output_ex()   terminate_session()     epic_popsize_age <- data.frame(year = seq(2015, by = 1, length.out = time_horizon),                                  output$n_alive_by_ctime_age)   colnames(epic_popsize_age)[2:ncol(epic_popsize_age)] <- 1:(ncol(epic_popsize_age) - 1)   epic_popsize_age <- epic_popsize_age[, -(2:40)]   epic_popsize_age_long <- epic_popsize_age %>%     pivot_longer(!year, names_to = \"age\", values_to = \"EPIC_popsize\") %>%     mutate(age=as.integer(age))     validate_pop_size_scaled <- USSimulation %>%     rename(US_popsize = value) %>%     left_join(epic_popsize_age_long, by = c(\"year\", \"age\")) %>%     mutate(EPIC_output_scaled = ifelse(year == 2015, US_popsize, NA))    # calculate total population and growth rates   total_epic_by_year <- validate_pop_size_scaled %>%     group_by(year) %>%     summarise(total_EPIC_output = sum(EPIC_popsize, na.rm = TRUE)) %>%     arrange(year) %>%     mutate(growth_rate = total_EPIC_output / lag(total_EPIC_output))     df_with_growth <- validate_pop_size_scaled %>%     left_join(total_epic_by_year, by = \"year\") %>%     arrange(year, age) %>%     group_by(age) %>%     mutate(       EPIC_output_scaled = ifelse(year == 2015, US_popsize, NA),       EPIC_output_scaled = replace_na(EPIC_output_scaled, first(US_popsize)) *         cumprod(replace_na(growth_rate, 1))     )    # filter and sum population data by age group (40-59 and 60-79)   df_summed_ranges <- df_with_growth %>%     mutate(       age_group = case_when(         age >= 40 & age <= 59 ~ \"40-59\",         age >= 60 & age <= 79 ~ \"60-79\"       )     ) %>%     filter(age_group %in% c(\"40-59\", \"60-79\")) %>%     group_by(year, age_group) %>%     summarise(total_EPIC_population = sum(EPIC_output_scaled, na.rm = TRUE),               total_US_population = sum(US_popsize, na.rm = TRUE))    # calculating RMSE of each age group across years   rmse_per_range <- df_summed_ranges %>%     group_by(age_group) %>%     summarise(       rmse = sqrt(mean((total_EPIC_population - total_US_population)^2, na.rm = TRUE)),       .groups = \"drop\"     )    # summing all the age ranges   total_rmse <- sum(rmse_per_range$rmse, na.rm = TRUE)    print(paste(\"Params:\", paste(params, collapse = \", \")))   print(paste(\"RMSE:\", total_rmse))    return(total_rmse) }"},{"path":"/articles/Calibrate_Demographics.html","id":"step-3-define-initial-guess-bounds-and-run-optimization","dir":"Articles","previous_headings":"","what":"Step 3: Define Initial Guess, Bounds, and Run Optimization","title":"Calibrate Demographics","text":"now define initial guess parameters set bounds parameter. optimization method used L-BFGS-B, well-suited differentiable functions bounds. also specify stopping criterion.","code":"initial_guess <- c(-3.5, 0.0005, -0.00005, 0, -0.025, 0, 0)  lower_bounds <- c(-3.6, 0.0001, -0.0001, -0.0005, -0.0001, -0.0005, -0.0005) upper_bounds <- c(-3.45, 0.01, 0, 0, 0, 0, 0)   # here i am using L-BFGS-B because RMSE is a differentiable function # we can define lower and upper bounds, #more memory efficient in BFGS, making it suitable for large parameter spaces. result_optim <- optim(   par = initial_guess,   fn = calculate_rmse_optim,   lower = lower_bounds,   upper = upper_bounds,   method = \"L-BFGS-B\",   control = list(maxit = 20, iterlim = 3) )  print(paste(\"Optimal Growth Rate:\", result_optim$par)) print(paste(\"Optimized RMSE:\", result_optim$value))"},{"path":"/articles/Calibrate_Demographics.html","id":"step-4-optimal-parameters-and-result","dir":"Articles","previous_headings":"","what":"Step 4: Optimal Parameters and Result","title":"Calibrate Demographics","text":"running optimization process, obtain optimal values parameters. values minimize RMSE specified age groups (40-59 60-79) exclude 80+ age group. optimized parameters yield lowest RMSE, reflect best possible values model terms population size predictions selected age groups.","code":"params <- c(-3.48672063032448, 0.00202274171887977, -4.37035899506131e-05,              0, -1e-04, 0, -0.000132065698144107)"},{"path":"/articles/Calibrate_Demographics.html","id":"visualization","dir":"Articles","previous_headings":"","what":"Visualization","title":"Calibrate Demographics","text":"section, visualize compare population trends time different age groups using optimized parameters U.S. population data.","code":""},{"path":"/articles/Calibrate_Smoking.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"Calibrate Smoking Status","text":"document outlines steps taken calibrate model align U.S.-based validation targets smoking behavior using 25 year time horizon. Smoking behavior data U.S. National Health Interview Survey years 2018 2023 used validation targets. Data 2018 U.S. National Health Interview Survey Table -12b (https://archive.cdc.gov/www_cdc_gov/nchs/nhis/shs/tables.htm) used calculate proportion current, former, non-smokers among adults aged 45 . Population counts summed age groups 45–64, 65–74, 75+, yielding total 134,448 individuals. , 13.2% identified current smokers (n=17,797), 29.3% former smokers (n=39,351), 57.2% non-smokers (n=76,873). EPIC model simulates individuals aged 40 older, survey data stratified using 40+ grouping; therefore, individuals aged 45 used appropriate proxy model validation. estimate number proportion current exclusive cigarette smokers among U.S. adults aged 45 2023, data 2025 MMWR report based National Health Interview Survey (DOI: 10.15585/mmwr.mm7407a3) referenced. estimated number exclusive cigarette smokers 2023 8.77 million adults aged 45–64 4.20 million aged 65 older. Using reported prevalence rates—11.2% ages 45–64 7.5% ages 65 older—population denominators back-calculated dividing number smokers respective prevalence estimates. resulted estimated population 78.3 million adults aged 45–64 56.0 million aged 65 older, totaling approximately 134.3 million adults aged 45 . 2018 data, absence 40+ age grouping required use 45 surrogate, resulting estimated smoking prevalence 9.7% (12.97 million 134.3 million). project future decline prevalence cigarette smoking among U.S. adults aged 40 2023, historical data 2025 MMWR report (DOI: 10.15585/mmwr.mm7407a3) used. 2017, number exclusive cigarette smokers estimated 11.0 million adults aged 45–64 3.57 million aged 65 older, totaling 14.57 million. 2023, figures declined 8.77 million 4.20 million, respectively, resulting combined total 12.97 million smokers aged 45 . AAPC calculated using formula: AAPC = ((Value 2023 / Value 2017) ^ (1/6)) - 1. resulted estimated AAPC –1.9% per year. historical trend applied model projected year--year decline smoking prevalence beyond 2023. Summary validation targets: - Current smokers (2018): 13.2% - Former smokers (2018): 29.3% - Never smokers (2018): 57.5% - Current smokers (2023): 9.7% - AAPC 2023: –1.9% per year","code":""},{"path":"/articles/Calibrate_Smoking.html","id":"step-1-load-libraries-and-setup","dir":"Articles","previous_headings":"","what":"Step 1: Load libraries and setup","title":"Calibrate Smoking Status","text":", necessary libraries loaded. default simulation settings set time horizon specified simulation (25 years).","code":"library(epicR) library(ggplot2) library(scales) library(dplyr) library(tidyr) library(knitr)  # Load EPIC general settings settings <- get_default_settings() settings$record_mode <- 0 settings$n_base_agents <- 1e5 init_session(settings = settings) ## [1] 0 input <- get_input(jurisdiction = \"us\") time_horizon <- 26 input$values$global_parameters$time_horizon <- time_horizon"},{"path":"/articles/Calibrate_Smoking.html","id":"step-2-modify-intercept-value-to-calibrate-proportion-of-non-smokers-and-former-smokers-in-the-model","dir":"Articles","previous_headings":"","what":"Step 2: Modify intercept value to calibrate proportion of non-smokers and former smokers in the model","title":"Calibrate Smoking Status","text":"EPIC’s existing calibration function (EPIC Canada) accurately matched overall smoking rates 2018 Summary Health Statistics: National Health Interview Survey (NHIS), however, underestimated proportions never former smokers. address , intercepts determines probability never smoker probability smoker time creation logistic regression equation modified.","code":"# Modify smoking rates input$values$smoking$logit_p_current_smoker_0_betas <- t(as.matrix(c(Intercept = 0.35, sex = -0.4, age = -0.032, age2 = 0, sex_age = 0, sex_age2 = 0, year = -0.02)))    input$values$smoking$logit_p_never_smoker_con_not_current_0_betas<-t(as.matrix(c(intercept = 4.9, sex = 0, age = -0.06, age2 = 0, sex_age = 0,sex_age2 = 0, year = -0.02)))"},{"path":"/articles/Calibrate_Smoking.html","id":"step-3-modify-rate-of-annual-rate-of-decline-in-proportion-of-current-smokers","dir":"Articles","previous_headings":"","what":"Step 3: Modify rate of annual rate of decline in proportion of current smokers","title":"Calibrate Smoking Status","text":"align model validation targets proportion current smokers 2018 2023, intercept log-hazard function smoking cessation adjusted modify rate decline smoking prevalence.","code":"# Modify rate of decline input$values$smoking$ln_h_ces_betas <- c(intercept = -3.35,  sex = 0, age = 0.02, age2 = 0, calendar_time = -0.01, diagnosis = log(1.38))"},{"path":"/articles/Calibrate_Smoking.html","id":"step-4-lower-minimum-prevalence-of-smoking","dir":"Articles","previous_headings":"","what":"Step 4: Lower minimum prevalence of smoking","title":"Calibrate Smoking Status","text":"U.S. Healthy People initiative aims reduce adult smoking prevalence 5%. reflect national policy goal ensure face validity long-term projections, minimum threshold smoking prevalence model adjusted 5%.","code":"# Modify lower bound prevalence of current smokers input$values$smoking$minimum_smoking_prevalence <- 0.05"},{"path":"/articles/Calibrate_Smoking.html","id":"step-5-modify-intercept-value-to-calibrate-number-of-pack-years-smoked-in-current-and-former-smokers","dir":"Articles","previous_headings":"","what":"Step 5: Modify intercept value to calibrate number of pack-years smoked in current and former smokers","title":"Calibrate Smoking Status","text":"EPIC’s existing calibration function (EPIC Canada) underpredicted pack-years adults ever smoked reported Population Assessment Tobacco Health (PATH) Study (https://pubmed.ncbi.nlm.nih.gov/39461637/). Data provided 2018-2019 PATH Study estimated average 32.9 pack-years among adults ever smoked (https://pubmed.ncbi.nlm.nih.gov/39461637/). address , intercept logistic regression equation determines pack-years smoking time creation modified. Increasing intercept 30 improved alignment data PATH.","code":"# Modify pack years input$values$smoking$pack_years_0_betas <- t(as.matrix(c(intercept = 30, sex = -4, age = 0, year = -0.6, current_smoker = 10)))"},{"path":"/articles/Calibrate_Smoking.html","id":"step-6-modify-mortality-ratios-for-age-groups","dir":"Articles","previous_headings":"","what":"Step 6: Modify mortality ratios for age groups","title":"Calibrate Smoking Status","text":"mortality rates currently used EPIC Canada include mortality ratios individuals age 60. recent data Cho et al.2024 (DOI: 10.1056/EVIDoa2300272; Table 2) provide age-specific mortality hazard ratios, stratified sex. EPIC model mortality sex, midpoint reported male female estimates age group used. mortality ratio individuals age 80, estimates Gillert et al.2012 retained (DOI: 10.1001/archinternmed.2012.1397), Cho et al.2024 report data population.","code":"# Modify mortality ratios for current smokers vs. non smokers input$values$smoking$mortality_factor_current <- t(as.matrix(c(age40to49 = 2.33, age50to59 = 3.02, age60to69 = 2.44, age70to79 = 2.44, age80p = 1.66)))  # Modify mortality ratios for former smokers vs. non smokers input$values$smoking$mortality_factor_former <- t(as.matrix(c(age40to49 = 1.31, age50to59 = 1.85, age60to69 = 1.91, age70to79 = 1.91, age80p = 1.27)))"},{"path":"/articles/Calibrate_Smoking.html","id":"step-7-run-epic","dir":"Articles","previous_headings":"","what":"Step 7: Run EPIC","title":"Calibrate Smoking Status","text":"","code":"run(input = input$values) ## Using user config file from: /home/runner/.epicR/config/config_canada.json ## Running EPIC model (with custom input parameters) ## Record mode: record_mode_none (0) ## Note: No events will be recorded. Use record_mode_event (2) or record_mode_agent (1) to record events. ## Simulating 100000 base agents: 10% 20% 30% 40% 50% ## 60% 70% 80% 90% 100% ## [1] 0 output <- Cget_output_ex() terminate_session() ## Terminating the session ## [1] 0"},{"path":"/articles/Calibrate_Smoking.html","id":"step-8-create-data-tables","dir":"Articles","previous_headings":"","what":"Step 8: Create data tables","title":"Calibrate Smoking Status","text":"Proportion Smoking Status Time","code":"#Calculate smoking proportions smokingstatus_overall <- output$n_smoking_status_by_ctime row_sums <- rowSums(smokingstatus_overall) smokingstatus_proportions <- smokingstatus_overall / row_sums smokingstatus_proportions <- as.data.frame(smokingstatus_proportions)  # Rename columns for readability colnames(smokingstatus_proportions) <- c(\"Never Smoker\", \"Current Smoker\", \"Former Smoker\")  # Add Year column smokingstatus_proportions$Year <- 2015:2040  # Display summary of smoking status  kable(   smokingstatus_proportions[, c(\"Year\", \"Never Smoker\", \"Current Smoker\", \"Former Smoker\")],   caption = \"Proportion of Smoking Status Over Time\",   digits = 3   )"},{"path":"/articles/Calibrate_Smoking.html","id":"step-9-visualize-data","dir":"Articles","previous_headings":"","what":"Step 9: Visualize data","title":"Calibrate Smoking Status","text":"","code":"# Reshape data for plotting smokingstatus_reshaped<- pivot_longer(   smokingstatus_proportions,   cols = c(\"Never Smoker\", \"Current Smoker\", \"Former Smoker\"),   names_to = \"Status\",   values_to = \"Proportion\"   )  # Define colors poster_colors <- c(   \"Never Smoker\" = \"#003f5c\",         \"Current Smoker\" = \"#ffa600\",      \"Former Smoker\" = \"#66c2ff\"         )  # Plot smoking status trends ggplot(smokingstatus_reshaped, aes(x = Year, y = Proportion, color = Status)) +   geom_line(linewidth = 1.5) +   geom_point(size = 3) +   scale_color_manual(values = poster_colors) +   scale_y_continuous(labels = percent_format(accuracy = 1), limits = c(0, 1)) +   scale_x_continuous(breaks = seq(2015, 2040, by = 5)) +   labs(     title = \"Smoking Status Trends Over Time\",     subtitle = \"Smoking status from 2015–2040\",     x = \"Year\",     y = \"Proportion of Population\",     color = \"Smoking Status\"     ) +   theme_minimal(base_size = 14) +   theme(     plot.title = element_text(face = \"bold\", size = 18, hjust = 0.5),     plot.subtitle = element_text(size = 14, hjust = 0.5),     axis.title = element_text(face = \"bold\"),     axis.text = element_text(color = \"black\"),     axis.line = element_line(color = \"black\", linewidth = 0.8),     panel.grid.major = element_blank(),     panel.grid.minor = element_blank(),     legend.title = element_text(face = \"bold\"),     legend.text = element_text(size = 12, margin = margin(b = 4)),     legend.key.height = unit(1.2, \"lines\")     )"},{"path":"/articles/Calibrate_Smoking.html","id":"step-10-observe-trend-in-pack-years-per-person","dir":"Articles","previous_headings":"","what":"Step 10: Observe trend in pack years per person","title":"Calibrate Smoking Status","text":"figure serves assess face validity simulated trajectory average pack-years per smoker time. Due absence nationally representative longitudinal data cumulative smoking exposure (pack-years) United States, trends smoking intensity used estimate impact pack-years. Evidence Cornelius et al. 2022 published CDC’s Morbidity Mortality Weekly Report (DOI: 10.15585/mmwr.mm7111a1) highlights sustained decline cigarette consumption among daily smokers 2005 2020. period: proportion adults reporting consumption 20–29 cigarettes/day decreased 34.9% 27.9% smoking ≥30 cigarettes/day declined 12.7% 6.4% Conversely, percentage smoking 1–9 cigarettes/day increased 16.4% 25.0% smoking 10–19 cigarettes/day rose 36.0% 40.7% data reflect broader shift toward lower daily cigarette consumption, suggesting , average, smokers now consuming approximately half one pack per day. light , projected decline cumulative pack-year exposure expected reasonable. observed decrease average pack-years per smoker model therefore aligned empirically documented reductions smoking intensity, supporting face validity simulated trend.","code":"# Calculate total pack years by year pack_years_total<- as.data.frame(output$sum_pack_years_by_ctime_sex) pack_years_total <- rowSums(pack_years_total) pack_years_total <- data.frame(   Year = 2015:2040,   packyears = pack_years_total)  # Calculate total number of current and former smokers by year  smoking_history <- as.data.frame(output$n_smoking_status_by_ctime) smoking_history <- rowSums(smoking_history [, 2:3]) smoking_history <- data.frame(     Year = 2015:2040,     n_smokers = smoking_history)  # Merge datasets by year pack_years_total_and_smoking_history <- merge(pack_years_total, smoking_history, by = \"Year\")  # Calculate average pack-years  pack_year_per_person <- data.frame(   Year = pack_years_total_and_smoking_history$Year,   AvgPackYearsPerSmoker = pack_years_total_and_smoking_history$packyears / pack_years_total_and_smoking_history$n_smokers   )  #"},{"path":"/articles/Calibrate_Smoking.html","id":"step-11-visualize-trend-in-pack-years-per-person","dir":"Articles","previous_headings":"","what":"Step 11: Visualize trend in pack years per person","title":"Calibrate Smoking Status","text":"","code":"ggplot(pack_year_per_person, aes(x = Year, y = AvgPackYearsPerSmoker)) +   geom_line(linewidth = 1.5, color = \"#003f5c\") +              geom_point(size = 3, color = \"#66c2ff\", stroke = 0.8) +     scale_y_continuous(     labels = scales::comma_format(accuracy = 1),     limits = c(0, 40)     ) +   scale_x_continuous(breaks = seq(2015, 2040, by = 5)) +   labs(     title = \"Average Pack-Years per Smoker Over Time\",     subtitle = \"Estimated smoking exposure per smoker from 2015–2040\",     x = \"Year\",     y = \"Average Pack-Years\"     ) +   theme_minimal(base_size = 14) +   theme(     plot.title = element_text(face = \"bold\", size = 18, hjust = 0.5, margin = margin(b = 8)),     plot.subtitle = element_text(size = 14, hjust = 0.5),     axis.title = element_text(face = \"bold\"),     axis.text = element_text(color = \"black\"),     axis.line = element_line(color = \"black\", linewidth = 0.8),     panel.grid.major = element_blank(),     panel.grid.minor = element_blank()     )"},{"path":[]},{"path":"/articles/GettingStarted.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Getting Started with EPIC","text":"guide help get started Evaluation Platform COPD (EPIC) using epicR package. end vignette, able : Run basic COPD simulation Understand interpret model outputs Customize inputs settings analysis Choose Canadian US populations","code":""},{"path":"/articles/GettingStarted.html","id":"what-is-epic","dir":"Articles","previous_headings":"","what":"What is EPIC?","title":"Getting Started with EPIC","text":"EPIC discrete-event simulation (DES) model Chronic Obstructive Pulmonary Disease (COPD). models entire pathway care including: Disease incidence progression Diagnosis case detection Exacerbations (mild, moderate, severe) Treatment medication Healthcare resource utilization Mortality model simulates individual patients (called “agents”) demographic clinical characteristics. agent progresses time, experiencing events like birthdays, disease onset, exacerbations, treatment changes.","code":""},{"path":"/articles/GettingStarted.html","id":"installation","dir":"Articles","previous_headings":"","what":"Installation","title":"Getting Started with EPIC","text":"haven’t already installed epicR:","code":"# Install from GitHub pak::pkg_install(\"resplab/epicR\")"},{"path":[]},{"path":"/articles/GettingStarted.html","id":"simple-approach-recommended","dir":"Articles","previous_headings":"Quick Start: Your First Simulation","what":"Simple Approach (Recommended)","title":"Getting Started with EPIC","text":"easiest way run simulation using simulate() function, handles session management automatically provides progress information (configuration summary, real-time progress bar, elapsed time, status messages): basic output includes:","code":"library(epicR) # Run with defaults - that's it! results <- simulate()  # Access basic results print(results$basic)  # Custom parameters results <- simulate(   jurisdiction = \"us\",   time_horizon = 10,   n_agents = 100000 )  # Quick test with fewer agents (faster for testing) results <- simulate(n_agents = 10000)  # Get extended results (includes both basic and extended) results <- simulate(return_extended = TRUE) print(results$extended)  # Get event history (automatically sets record_mode) results <- simulate(return_events = TRUE) head(results$events)"},{"path":"/articles/GettingStarted.html","id":"choosing-a-jurisdiction-canada-vs-us","dir":"Articles","previous_headings":"","what":"Choosing a Jurisdiction: Canada vs US","title":"Getting Started with EPIC","text":"EPIC supports Canadian US populations jurisdiction-specific parameters: jurisdictions differ : - Population demographics - Smoking prevalence trends - Healthcare costs - Disease incidence rates","code":"# For Canadian population (default) results_canada <- simulate(jurisdiction = \"canada\")  # For US population results_us <- simulate(jurisdiction = \"us\")"},{"path":[]},{"path":"/articles/GettingStarted.html","id":"understanding-inputs","dir":"Articles","previous_headings":"Customizing Your Simulation","what":"Understanding Inputs","title":"Getting Started with EPIC","text":"Inputs control model’s parameters. Explore :","code":"inputs <- get_input()  # Top-level structure names(inputs) # [1] \"values\" \"help\" \"references\"  # Value categories names(inputs$values)  # Example: global parameters names(inputs$values$global_parameters) inputs$values$global_parameters$time_horizon  # Simulation duration in years"},{"path":"/articles/GettingStarted.html","id":"common-input-modifications","dir":"Articles","previous_headings":"Customizing Your Simulation","what":"Common Input Modifications","title":"Getting Started with EPIC","text":"simulate() function provides convenient parameters common customizations: advanced input modifications, can use get_input() explore modify parameters:","code":"# Change time horizon results <- simulate(time_horizon = 20)  # Change jurisdiction and time horizon results <- simulate(jurisdiction = \"us\", time_horizon = 15)  # For quick testing results <- simulate(n_agents = 10000, time_horizon = 5) # Explore available inputs input <- get_input() names(input$values)  # See categories  # View specific parameters input$values$cost$exac_dcost  # Exacerbation costs by severity input$values$global_parameters$time_horizon"},{"path":"/articles/GettingStarted.html","id":"understanding-settings","dir":"Articles","previous_headings":"Customizing Your Simulation","what":"Understanding Settings","title":"Getting Started with EPIC","text":"Settings control model runs (simulates): Key settings:","code":"settings <- get_default_settings() names(settings)"},{"path":"/articles/GettingStarted.html","id":"choosing-the-number-of-agents","dir":"Articles","previous_headings":"Customizing Your Simulation","what":"Choosing the Number of Agents","title":"Getting Started with EPIC","text":"agents = precision longer runtime memory:","code":"# Quick test run (10,000 agents) results <- simulate(n_agents = 1e4)  # Standard run (60,000 agents - default) results <- simulate()  # Production run (1,000,000 agents) results <- simulate(n_agents = 1e6)  # Check memory requirements before running large simulations estimate_memory_required(n_agents = 1e6, record_mode = 0, time_horizon = 20)"},{"path":[]},{"path":"/articles/GettingStarted.html","id":"extended-output","dir":"Articles","previous_headings":"Getting Detailed Results","what":"Extended Output","title":"Getting Started with EPIC","text":"detailed results year demographics:","code":"# Get both basic and extended results results <- simulate(return_extended = TRUE)  # Access basic results print(results$basic)  # Access detailed output tables names(results$extended)"},{"path":"/articles/GettingStarted.html","id":"individual-patient-data","dir":"Articles","previous_headings":"Getting Detailed Results","what":"Individual Patient Data","title":"Getting Started with EPIC","text":"collect event-level data agent, use return_events = TRUE: Warning: Recording individual events requires substantial memory. Start small number agents.","code":"# Get event history (automatically sets record_mode = 2) # Keep n_agents small due to memory requirements results <- simulate(   n_agents = 1e4,   time_horizon = 5,   return_events = TRUE )  # Access events data frame head(results$events)  # Can also get basic and extended results together results <- simulate(   n_agents = 1e4,   return_extended = TRUE,   return_events = TRUE ) # Returns: results$basic, results$extended, results$events"},{"path":"/articles/GettingStarted.html","id":"event-types","dir":"Articles","previous_headings":"Getting Detailed Results","what":"Event Types","title":"Getting Started with EPIC","text":"event individual data numeric code:","code":""},{"path":"/articles/GettingStarted.html","id":"open-vs-closed-cohort","dir":"Articles","previous_headings":"","what":"Open vs Closed Cohort","title":"Getting Started with EPIC","text":"default, EPIC open population model captures population dynamics (births, deaths, immigration, emigration). closed cohort analysis (fixed initial population, new entries):","code":"# Run closed cohort analysis results <- simulate(closed_cohort = TRUE)  # Combine with other parameters results <- simulate(   closed_cohort = TRUE,   jurisdiction = \"us\",   time_horizon = 10,   n_agents = 50000 )"},{"path":"/articles/GettingStarted.html","id":"comparing-scenarios","dir":"Articles","previous_headings":"","what":"Comparing Scenarios","title":"Getting Started with EPIC","text":"common use case comparing interventions. simulate() function makes straightforward: complex scenarios requiring custom input modifications, see “Advanced Usage” section .","code":"# Baseline scenario results_baseline <- simulate(   jurisdiction = \"canada\",   time_horizon = 20,   n_agents = 100000 )  # Intervention scenario (e.g., different time horizon or jurisdiction) results_intervention <- simulate(   jurisdiction = \"us\",   time_horizon = 20,   n_agents = 100000 )  # Compare outcomes cost_diff <- results_intervention$basic$total_cost -   results_baseline$basic$total_cost qaly_diff <- results_intervention$basic$total_qaly -   results_baseline$basic$total_qaly icer <- cost_diff / qaly_diff"},{"path":"/articles/GettingStarted.html","id":"advanced-usage","dir":"Articles","previous_headings":"","what":"Advanced Usage","title":"Getting Started with EPIC","text":"advanced users need fine-grained control (e.g., running multiple simulations one session modifying complex input parameters), can manage sessions manually:","code":""},{"path":"/articles/GettingStarted.html","id":"manual-session-management","dir":"Articles","previous_headings":"Advanced Usage","what":"Manual Session Management","title":"Getting Started with EPIC","text":"","code":"# Initialize session once init_session()  # Run multiple simulations with same session run() results1 <- Cget_output()  run()  # run again with same session results2 <- Cget_output()  # Clean up when done terminate_session()"},{"path":"/articles/GettingStarted.html","id":"custom-input-modifications","dir":"Articles","previous_headings":"Advanced Usage","what":"Custom Input Modifications","title":"Getting Started with EPIC","text":"complex input modifications covered simulate() parameters:","code":"# Get and modify inputs input <- get_input()  # Modify specific parameters input$values$global_parameters$time_horizon <- 5 input$values$agent$p_female <- 0.55  # Run with custom inputs init_session() run(input = input$values) results <- Cget_output() terminate_session()"},{"path":"/articles/GettingStarted.html","id":"error-handling","dir":"Articles","previous_headings":"Advanced Usage","what":"Error Handling","title":"Getting Started with EPIC","text":"Always wrap manual session management error handling:","code":"tryCatch({   init_session()   run()   results <- Cget_output() }, finally = {   terminate_session() })"},{"path":[]},{"path":"/articles/GettingStarted.html","id":"memory-errors","dir":"Articles","previous_headings":"Troubleshooting","what":"Memory Errors","title":"Getting Started with EPIC","text":"get memory allocation errors: 1. Reduce number agents: simulate(n_agents = 10000) 2. Don’t request event history unless needed (omit return_events) 3. Check available memory estimate_memory_required()","code":""},{"path":"/articles/GettingStarted.html","id":"session-issues","dir":"Articles","previous_headings":"Troubleshooting","what":"Session Issues","title":"Getting Started with EPIC","text":"simulate() function handles session management automatically includes error handling. ’re using manual session management (see Advanced Usage), always use tryCatch() ensure terminate_session() called even errors occur.","code":""},{"path":"/articles/GettingStarted.html","id":"next-steps","dir":"Articles","previous_headings":"","what":"Next Steps","title":"Getting Started with EPIC","text":"Model Background: See vignette(\"BackgroundEPIC\") model structure details Calibration: See vignette(\"Calibrate_COPD_Prevalence\") calibration methods Validation: Explore validate_*() functions model validation US Model: See vignette(\"Calibrate_Smoking\") US-specific calibration","code":""},{"path":"/articles/GettingStarted.html","id":"references","dir":"Articles","previous_headings":"","what":"References","title":"Getting Started with EPIC","text":"Sadatsafavi M, et al. (2019). Development Validation Evaluation Platform COPD (EPIC): Population-Based Outcomes Model COPD Canada. Medical Decision Making. doi:10.1177/0272989X18824098","code":""},{"path":"/articles/Payoffs.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"Payoffs","text":"document outlines steps taken determine input values payoff module.","code":""},{"path":"/articles/Payoffs.html","id":"step-1-estimating-annual-copd-medication-costs","dir":"Articles","previous_headings":"Overview","what":"Step 1: Estimating annual COPD medication costs","title":"Payoffs","text":"Annual COPD medication costs estimated using two components: Prices obtained published literature (DOI: 10.1513/AnnalsATS.202008-1082RL). Prices SABA LAMA digitized Figure 2A prices reported text. assumed one inhaler used per month per drug class, resulting 12 inhalers annually. Annual cost per drug class (2018 Costs USD) calculated :Annual Cost = Inhaler Unit Price × 12 PDC estimates used determine adherence inhaler therapies Mannino et al. 2022 (DOI: 10.1016/j.rmed.2022.106807) Slade et al. 2021 (DOI: 10.1186/s12890-021-01612-5) Bengtson et al. 2018 (DOI: 10.1177/1753466618772750)","code":""},{"path":"/articles/Payoffs.html","id":"dispense-frequency-per-year-adjusted-via-pdc","dir":"Articles","previous_headings":"Overview > Step 1: Estimating annual COPD medication costs","what":"Dispense frequency per year (adjusted via PDC)","title":"Payoffs","text":"Mannino et al. 2022: - ICS + LAMA + LABA: PDC = 0.66 Slade et al. 2021: - LAMA + LABA: PDC = 0.44 - LAMA: PDC = 0.37 Bengtson et al. 2018 - SABA: study reported average 1 fill per month Adherence: Adherence determined average PDC reported studies assessed non-SABA inhalers= 0.49. Estimated Annual COPD Inhaler Costs Drug Class","code":""},{"path":"/articles/Payoffs.html","id":"step-2-estimating-copd-related-background-costs-by-gold-stage","dir":"Articles","previous_headings":"Overview","what":"Step 2: Estimating COPD-related background costs by GOLD stage","title":"Payoffs","text":"COPD-related background costs estimated using data Wallace et al 2019 (DOI: 10.18553/jmcp.2019.25.2.205) Table 3, specifically row labeled “COPD-related costs, patients”. Background costs calculated subtracting costs Inpatient Care, Emergency Room (ER) Visits, Pharmacy Total COPD-related Medical Costs (2016 Costs USD) costs determined separately. COPD-related Background Costs GOLD Stage","code":""},{"path":"/articles/Payoffs.html","id":"step-3-estimating-exacerbation-costs-by-severity","dir":"Articles","previous_headings":"Overview","what":"Step 3: Estimating exacerbation costs by severity","title":"Payoffs","text":"exacerbation module assigns per-event direct medical costs based severity: Mild, Moderate, Severe, Severe. cost estimates derived U.S.-based healthcare utilization studies. Mild Exacerbation: Defined increase bronchodilator use result healthcare encounter. assumed half number available doses SABA inhaler used per event. Cost SABA inhaler obtained published literature (DOI: 10.1513/AnnalsATS.202008-1082RL). Moderate Exacerbation: Involves visit healthcare facility (e.g., physician office emergency department) without resulting hospital admission. Severe Exacerbation: Defined inpatient hospital admission Severe Exacerbation: Defined ICU admission following references used: Dalal et al. 2011 (DOI: 10.1016/j.rmed.2010.09.003) — 2008 Costs USD Bogart et al. 2020 (DOI: 10.37765/ajmc.2020.43157) — 2017 Costs USD Per-Event COPD Exacerbation Costs Severity","code":""},{"path":[]},{"path":"/articles/Payoffs.html","id":"estimating-the-cost-of-smoking-cessation-therapy","dir":"Articles","previous_headings":"Overview","what":"Estimating the Cost of Smoking Cessation Therapy","title":"Payoffs","text":"estimate cost smoking cessation therapy, distribution commonly used pharmacologic behavioral therapies obtained MMWR study (DOI: 10.15585/mmwr.mm7329a1). reported usage among individuals attempting quit included: Nicotine patch: 19.6% Nicotine gum/lozenge: 18.4% Nicotine spray/inhaler: 1.0% Varenicline: 9.6% Bupropion: 6.4% Behavioral counseling: 7.3%","code":""},{"path":"/articles/Payoffs.html","id":"reweighted-to-assume-100-uptake","dir":"Articles","previous_headings":"Overview > Estimating the Cost of Smoking Cessation Therapy","what":"Reweighted to Assume 100% Uptake","title":"Payoffs","text":"standardize distribution across therapies, reweighting performed using total therapies (62.3%): Nicotine patch: (19.6 / 62.3) × 100 ≈ 31.5% Nicotine gum/lozenge: (18.4 / 62.3) × 100 ≈ 29.5% Nicotine spray/inhaler: (1.0 / 62.3) × 100 ≈ 1.6% Varenicline: (9.6 / 62.3) × 100 ≈ 15.4% Bupropion: (6.4 / 62.3) × 100 ≈ 10.3% Behavioral counseling: (7.3 / 62.3) × 100 ≈ 11.7%","code":""},{"path":"/articles/Payoffs.html","id":"estimated-3-month-cost-of-smoking-cessation-therapy","dir":"Articles","previous_headings":"Overview > Estimating the Cost of Smoking Cessation Therapy","what":"Estimated 3-Month Cost of Smoking Cessation Therapy","title":"Payoffs","text":"Cost estimates based 2025 GoodRx prices 3-month course pharmacotherapy. behavioral counseling, Medicare reimburses 8 sessions per year, assumed number sessions used. per-session cost based 2015 CPT codes: 99406: $14.37 sessions <10 minutes 99407: $27.67 sessions >10 minutes midpoint value $21.02 per session applied, totaling $168.16 8 sessions. Using reweighted proportions, weighted average cost 3 months smoking cessation pharmacotherapy calculated : Average cost: $125.65 Smoking Cessation Therapy Use Cost Estimates (3-Month Duration)","code":""},{"path":"/articles/Payoffs.html","id":"step-5-estimating-costs-for-gp-visits-and-diagnostic-spirometry","dir":"Articles","previous_headings":"Overview","what":"Step 5: Estimating costs for GP visits and diagnostic spirometry","title":"Payoffs","text":"GP visits. CPT code 99214 standard outpatient GP visit, midpoint facility non facility visit reimbursement amounts used equates $94.15 (2015 Costs USD) Spirometry. CPT code 94060 used equates $61.81 (2015 Costs USD)","code":""},{"path":"/articles/RecalibratingEPIC.html","id":"previous-calibration","dir":"Articles","previous_headings":"","what":"Previous Calibration","title":"RecalibratingEPIC","text":"Assessing calibration exacerbations previous EPIC’s (v0.31.3) equations: equation exacerbations included term diagnosis. result, whether person diagnosed affect exacerbation rates, causal face validity, particularly undesirable case detection studies assess diagnosis. remove diagnosis term go back previous calibration, look like : following recalibrations assesses Recalibration 5 implemented epicR v0.35.0","code":"inputs <- get_input()$values inputs$exacerbation$ln_rate_betas = t(as.matrix(c(intercept = -3.4, female = 0, age = 0.04082 * 0.1, fev1 = -0, smoking_status = 0, gold1 = 1.4 , gold2 = 2.0 , gold3 = 2.4 , gold4 = 2.8 , diagnosis_effect = 0.9))) validate_exacerbation(5e4, inputs) inputs$exacerbation$ln_rate_betas <- t(as.matrix(c(intercept = 1.7, female = 0, age = 0.04082 * 0.1, fev1 = -1.5, smoking_status = 0, gold1 = 0.6 , gold2 = 0.35 , gold3 = 0.08 , gold4 = -0.35 , diagnosis_effect = 0))) validate_exacerbation(5e4, inputs)"},{"path":"/articles/RecalibratingEPIC.html","id":"recalibration-1","dir":"Articles","previous_headings":"","what":"Recalibration 1:","title":"RecalibratingEPIC","text":"Let’s try improve lowering GOLD coefficients:","code":"inputs$exacerbation$ln_rate_betas <- t(as.matrix(c(intercept = 1.7, female = 0, age = 0.04082 * 0.1, fev1 = -1.5, smoking_status = 0, gold1 = 0.3 , gold2 = 0.1 , gold3 = 0.08 , gold4 = -0.35 , diagnosis_effect = 0))) validate_exacerbation(5e4, inputs)"},{"path":"/articles/RecalibratingEPIC.html","id":"recalibration-2","dir":"Articles","previous_headings":"","what":"Recalibration 2:","title":"RecalibratingEPIC","text":"can now lower GOLD2 coefficient even perhaps increase smoking coefficient compensate loss diagnosed patients.","code":"inputs$exacerbation$ln_rate_betas <- t(as.matrix(c(intercept = 1.7, female = 0, age = 0.04082 * 0.1, fev1 = -1.5, smoking_status = 0.5, gold1 = 0.3 , gold2 = 0.05 , gold3 = 0.08 , gold4 = -0.35 , diagnosis_effect = 0))) validate_exacerbation(5e4, inputs)"},{"path":"/articles/RecalibratingEPIC.html","id":"recalibration-3","dir":"Articles","previous_headings":"","what":"Recalibration 3:","title":"RecalibratingEPIC","text":"Let’s lower GOLD2 dramatically:","code":"inputs$exacerbation$ln_rate_betas <- t(as.matrix(c(intercept = 1.7, female = 0, age = 0.04082 * 0.1, fev1 = -1.5, smoking_status = 0.5, gold1 = 0.3 , gold2 = -0.5 , gold3 = 0.08 , gold4 = -0.35 , diagnosis_effect = 0))) validate_exacerbation(5e4, inputs)"},{"path":"/articles/RecalibratingEPIC.html","id":"recalibration-4","dir":"Articles","previous_headings":"","what":"Recalibration 4:","title":"RecalibratingEPIC","text":"Bring GOLD2 bit:","code":"inputs$exacerbation$ln_rate_betas <- t(as.matrix(c(intercept = 1.7, female = 0, age = 0.04082 * 0.1, fev1 = -1.5, smoking_status = 0.5, gold1 = 0.3 , gold2 = -0.2 , gold3 = 0.08 , gold4 = -0.35 , diagnosis_effect = 0))) validate_exacerbation(5e4, inputs)"},{"path":"/articles/RecalibratingEPIC.html","id":"recalibration-5","dir":"Articles","previous_headings":"","what":"Recalibration 5:","title":"RecalibratingEPIC","text":"GOLD2 back bit .","code":"inputs$exacerbation$ln_rate_betas <- t(as.matrix(c(intercept = 1.7, female = 0, age = 0.04082 * 0.1, fev1 = -1.5, smoking_status = 0.5, gold1 = 0.3 , gold2 = -0.3 , gold3 = 0.08 , gold4 = -0.35 , diagnosis_effect = 0))) validate_exacerbation(5e4, inputs)"},{"path":"/articles/RecalibratingEPIC.html","id":"recalibration-6","dir":"Articles","previous_headings":"","what":"Recalibration 6:","title":"RecalibratingEPIC","text":"Reducing intercept adding smoking term.","code":"inputs$exacerbation$ln_rate_betas <- t(as.matrix(c(intercept = 1.4, female = 0, age = 0.04082 * 0.1, fev1 = -1.5, smoking_status = 0.7, gold1 = 0.3 , gold2 = -0.3 , gold3 = 0.08 , gold4 = -0.35 , diagnosis_effect = 0))) validate_exacerbation(5e4, inputs)"},{"path":[]},{"path":"/articles/Reproducing_bgd.html","id":"step-1-shutting-off-exacerbation-related-mortality-","dir":"Articles","previous_headings":"","what":"Step 1: Shutting off exacerbation related mortality.","title":"Reproducing Background Mortality","text":"First, set intercept exacerbation equation high value, effectively disabling death exacerbations model. adjustment made changing relevant variable follows:","code":"library(epicR) packageVersion(\"epicR\") input<-get_input(jurisdiction = \"us\") input$values$exacerbation$logit_p_death_by_sex <- cbind(   male = c(intercept = -13000, age = log(1.05), mild = 0, moderate = 0, severe = 7.4,     very_severe = 8, n_hist_severe_exac = 0),   female = c(intercept = -13000, age = log(1.05), mild = 0, moderate = 0, severe = 7.4,     very_severe = 8, n_hist_severe_exac = 0) )  #also setting exlicit mortality = 0 so there is no correction made input$values$manual$explicit_mortality_by_age_sex <- cbind(     male = c(rep(0, 111)),     female = c(rep(0, 111)))"},{"path":"/articles/Reproducing_bgd.html","id":"step-2-setting-longevitiy-related-parameters-to-0-","dir":"Articles","previous_headings":"","what":"Step 2: Setting longevitiy-related parameters to 0.","title":"Reproducing Background Mortality","text":"Longevity another factor model influences population. ensure external factors impact population, set parameters 0. adjustment can made input.R file.","code":"input$values$agent$ln_h_bgd_betas <- t(as.matrix(c(intercept = 0, y = 0, y2 = 0, age = 0,                                             b_mi = 0, n_mi = 0, b_stroke = 0,                                             n_stroke = 0, hf = 0)))"},{"path":"/articles/Reproducing_bgd.html","id":"step-3-run-the-model-for-1-year-and-retrieve-events-matrix","dir":"Articles","previous_headings":"","what":"Step 3: Run the model for 1 year and retrieve events matrix","title":"Reproducing Background Mortality","text":"Initially run model 1 year get events matrix. matrix logs events individuals go thoughout model. use matrix calculate death probabilities produced epicR","code":"library(epicR) settings <- get_default_settings() settings$record_mode <- 2 settings$n_base_agents <- 3.5e5  init_session(settings = settings) # input <- get_input(jurisdiction = \"us\")  # set time horizon as 1 initially  time_horizon <- 1 input$values$global_parameters$time_horizon <- time_horizon  run(input = input$values) events <- as.data.frame(Cget_all_events_matrix()) terminate_session()  # checking to make sure event 7 (death by exacerbation) is not included  # because we shut that off in the model unique(events$event) table(events$event)"},{"path":"/articles/Reproducing_bgd.html","id":"step-4-calculating-probability-of-death-from-events-matrix","dir":"Articles","previous_headings":"","what":"Step 4: Calculating probability of death from events matrix","title":"Reproducing Background Mortality","text":"","code":"library(dplyr) library(tidyr)  # we will group by age so we convert ages into whole numbers. events <- events %>%   mutate(age_and_local = floor(local_time + age_at_creation))  # Filter events to identify individuals who have experienced event 14, # while also creating a flag for whether they ever experienced event 13 (death) events_filtered<- events %>%   mutate(death= ifelse(event==13,1,0)) %>%   group_by(id) %>%   mutate(ever_death = sum(death)) %>%   filter(event==14) %>%   ungroup()   # calculationg probability of death death_prob<- events_filtered %>%   group_by(age_and_local, female) %>%   summarise(     total_count = n(),     death_count = sum(ever_death==1),     death_probability = death_count / total_count   )"},{"path":"/articles/Reproducing_bgd.html","id":"inspecting-the-results","dir":"Articles","previous_headings":"","what":"Inspecting the results","title":"Reproducing Background Mortality","text":"consider 40 year-olds beause (Amin said … ) values perfectly aligned validation target, variation negligible. Next, want ensure consistent directional effect. expect increasing time_horizon 5 years bring results closer target. Now, check results. see results even away:","code":"print(head(death_prob, 15)) print(tail(death_prob,15)) init_session(settings = settings)  # set time horizon to 5 time_horizon <- 6 input$values$global_parameters$time_horizon <- time_horizon  run(input = input$values) events5 <- as.data.frame(Cget_all_events_matrix()) terminate_session()  table(events$event)  events5 <- events5 %>%   mutate(age_and_local = floor(local_time + age_at_creation))   events5 <- events5 %>%   mutate(local_time_adj = ceiling(events5$local_time))  # withing that year have they ever died? events5_filtered<- events5 %>%   mutate(death= ifelse(event==13,1,0)) %>%   group_by(id,local_time_adj) %>%   mutate(ever_death = sum(death)) %>%   filter(event==14) %>%   ungroup()   death_prob5<- events5_filtered %>%   group_by(age_and_local, female, local_time_adj) %>%   summarise(     total_count = n(),     death_count = sum(ever_death==1),     death_probability = death_count / total_count   ) print(head(death_prob5, 15)) print(tail(death_prob5,15))"},{"path":"/articles/Reproducing_bgd.html","id":"visualizing-results","dir":"Articles","previous_headings":"","what":"Visualizing results","title":"Reproducing Background Mortality","text":"better understand differences, visualize results compare target values. time_horizon = 6, get following plot. break analyze per year, seems line expect.","code":"death_prob_clean <- death_prob %>%    ungroup() %>%    select(age_and_local, female, death_probability) %>%    pivot_wider(names_from = female, values_from = death_probability, names_prefix = \"sex_\")  colnames(death_prob_clean) <- c(\"Age\", \"Male\", \"Female\") USlifetables_num <- input$values$agent$p_bgd_by_sex   USlifetables_df <- data.frame(   Age = 1:nrow(USlifetables_num),  # Start age from 1   Male = USlifetables_num[, 1],   Female = USlifetables_num[, 2] )  common_ages <- intersect(death_prob_clean$Age, USlifetables_df$Age)  # filter both so only include the rows with matching Age death_prob_filtered <- death_prob_clean[death_prob_clean$Age %in% common_ages, ] USlifetables_filtered <- USlifetables_df[USlifetables_df$Age %in% common_ages, ] library(ggplot2) library(dplyr)  combined_data_long <- bind_rows(   death_prob_filtered %>% mutate(Source = \"epicR\"),   USlifetables_filtered %>% mutate(Source = \"US Life Tables\") ) %>%   pivot_longer(cols = c(\"Male\", \"Female\"), names_to = \"Sex\", values_to = \"Death_Probability\") %>%   filter(Age > 40)    ggplot(combined_data_long, aes(x = Age, y = Death_Probability, fill = Source)) +   geom_col(position = \"dodge\", width = 1) +     facet_wrap(~Sex) +   labs(     title = \"Comparison of epicR Death Probability vs. US Life Tables (time_horizon =1)\",     x = \"Age\",     y = \"Death Probability\",     fill = \"Source:\"   ) +   theme_minimal()+   theme(     legend.position = \"top\",     legend.justification = \"center\",     plot.title = element_text(hjust = 0.5, margin = margin(b = 10))   ) library(ggplot2) library(tidyr) library(dplyr)  combined_data_long5 <- bind_rows(   death_prob5_filtered %>% mutate(Source = \"epicR\"),   USlifetables_filtered %>% mutate(Source = \"US Life Tables\") ) %>%   pivot_longer(cols = c(\"Male\", \"Female\"), names_to = \"Sex\", values_to = \"Death_Probability\") %>%   filter(Age > 40)     final_EPIC_death5<- filter(combined_data_long5, Source == \"epicR\") final_US_death<- filter(combined_data_long5, Source == \"US Life Tables\")  # Add Death_Probability to USlifetables_filtered USlifetables_filtered_long <- USlifetables_filtered %>%   gather(key = \"Sex\", value = \"Death_Probability\", Male, Female)  # Loop through each unique year in the combined_data_long dataset for (year in unique(combined_data_long5$Year)) {      # Filter the data for the current year   year_data <- combined_data_long5 %>% filter(Year == year)      # Create the plot for the current year   p <- ggplot(combined_data_long, aes(x = Age, y = Death_Probability, fill = Source)) +   geom_col(position = \"dodge\", width = 1) +     facet_wrap(~Sex) +   labs(     title = \"Comparison of epicR Death Probability vs. US Life Tables (time_horizon = 6)\",     x = \"Age\",     y = \"Death Probability\",     fill = \"Source:\"   ) +   theme_minimal()+   theme(     legend.position = \"top\",     legend.justification = \"center\",     plot.title = element_text(hjust = 0.5, margin = margin(b = 10))   )      # Print the plot for the current year   # print(p) }  print(p)"},{"path":"/articles/Reproducing_bgd.html","id":"eliminating-smoking-mortality","dir":"Articles","previous_headings":"","what":"Eliminating smoking mortality","title":"Reproducing Background Mortality","text":"identified potential source observed mortality discrepancies. Specifically, mortality ratio associated former current smokers appears influencing results. investigate , set following smoking-related mortality factors 1 (indicating excess mortality risk former current smokers): making adjustment, results align closely life tables. model may generating excessive number current former smokers, leading higher mortality expected. need update mortality ratio estimates depending whether individual currently formerly smokes.","code":"input$values$smoking$mortality_factor_former<- c(age40to49=1,age50to59=1,                                                  age60to69=1,age70to79=1,                                                  age80p=1) input$values$smoking$mortality_factor_current<- c(age40to49=1,age50to59=1,                                                   age60to69=1,age70to79=1,                                                   age80p=1)"},{"path":"/articles/Reproducing_bgd.html","id":"changing-the-intercept-of-logit_p_never_smoker_con_not_current_0_betas","dir":"Articles","previous_headings":"","what":"Changing the intercept of logit_p_never_smoker_con_not_current_0_betas","title":"Reproducing Background Mortality","text":"Currently model many former smokers. can adjusted increased intercept logit_p_never_smoker_con_not_current_0_betas. first,instead changing mortality factors, keep mortality factors current former smokers . , adjust intercept ensure ratio never-smokers total population approximately 0.21. modify intercept accordingly achieve target. Now can visualize change:","code":"settings <- get_default_settings() settings$record_mode <- 2 settings$n_base_agents <- 1e6  init_session(settings = settings)  input<-get_input(jurisdiction = \"us\")  time_horizon <- 1 input$values$global_parameters$time_horizon <- time_horizon  # kept the same input$values$smoking$mortality_factor_current <- t(as.matrix(c(age40to49 = 1,                                                         age50to59 = 1,                                                         age60to69 = 1.94,                                                         age70to79 = 1.86,                                                         age80p = 1.66 )))  # kept the same input$values$smoking$mortality_factor_former<- t(as.matrix(c(age40to49 = 1,                                                       age50to59 = 1,                                                       age60to69 = 1.54,                                                       age70to79 = 1.36,                                                       age80p = 1.27 ))) # Probability of being a never-smoker conditional on not being current smoker, # at the time of creation input$values$smoking$logit_p_never_smoker_con_not_current_0_betas <-   t(as.matrix(c(intercept = 4.85, sex = 0, age = -0.06, age2 = 0,                 sex_age = 0,sex_age2 = 0, year = -0.02)))  run(input = input$values) events <- as.data.frame(Cget_all_events_matrix()) terminate_session()  # checking the ratio output<-Cget_output_ex() smoking_num<-output$n_smoking_status_by_ctime never_smoker_ratio <- smoking_num[1, 3] / sum(smoking_num[1, ]) never_smoker_ratio"},{"path":"/articles/UsingEPICinR.html","id":"installation","dir":"Articles","previous_headings":"","what":"1 Installation","title":"Using EPIC in R","text":"R installed computer, please go Appendix 1. R installed, can install epicR package per instructions :","code":""},{"path":"/articles/UsingEPICinR.html","id":"windows-7-or-later","dir":"Articles","previous_headings":"1 Installation","what":"Windows 7 or Later","title":"Using EPIC in R","text":"Download Install latest version R https://cran.r-project.org/bin/windows/base/ Download Install R Studio https://posit.co/download/rstudio-desktop/ Download Install latest version Rtools https://cran.r-project.org/bin/windows/Rtools/ Using either R session Terminal R Studio, install package pak: Install epicR GitHub:","code":"install.packages('pak') pak::pkg_install('resplab/epicR')"},{"path":"/articles/UsingEPICinR.html","id":"mac-os-sierra-and-later","dir":"Articles","previous_headings":"1 Installation","what":"Mac OS Sierra and Later","title":"Using EPIC in R","text":"Download Install latest version R https://cran.r-project.org/bin/macosx/ Download Install R Studio https://posit.co/download/rstudio-desktop/ Install Xcode Command Line Tools running following Terminal: Using either R session Terminal R Studio, install package pak: Install epicR GitHub:","code":"xcode-select --install install.packages('pak') pak::pkg_install('resplab/epicR')"},{"path":"/articles/UsingEPICinR.html","id":"ubuntu-22-04-and-later","dir":"Articles","previous_headings":"1 Installation","what":"Ubuntu 22.04 and Later","title":"Using EPIC in R","text":"Install R executing following commands Terminal: installation successful, able start R: Download Install R Studio https://posit.co/download/rstudio-desktop/ Install libcurl Terminal: Using either R session Terminal R Studio, install package pak: Install epicR GitHub:","code":"sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E298A3A825C0D65DFD57CBB651716619E084DAB9 sudo add-apt-repository 'deb [arch=amd64,i386] https://cran.rstudio.com/bin/linux/ubuntu xenial/' sudo apt-get update sudo apt-get install r-base sudo -i R sudo apt-get install libcurl4-openssl-dev libssl-dev r-base-dev install.packages(\"pak\") pak::pkg_install(\"resplab/epicR\")"},{"path":"/articles/UsingEPICinR.html","id":"running-the-model","dir":"Articles","previous_headings":"","what":"2 Running the Model","title":"Using EPIC in R","text":"Now installed epicR, can load library:","code":"library(epicR)"},{"path":"/articles/UsingEPICinR.html","id":"recommended-using-the-simulate-function","dir":"Articles","previous_headings":"2 Running the Model","what":"Recommended: Using the simulate() Function","title":"Using EPIC in R","text":"easiest way run EPIC simulate() function, handles session management automatically provides progress information:","code":"# Run with defaults (Canada, 20 year horizon, 60,000 agents) results <- simulate() print(results$basic)  # Customize parameters results <- simulate(   jurisdiction = \"us\",   time_horizon = 10,   n_agents = 100000 )  # Quick test with fewer agents results <- simulate(n_agents = 10000)  # Get extended results results <- simulate(return_extended = TRUE) print(results$extended)  # Get event history results <- simulate(return_events = TRUE, n_agents = 10000) head(results$events)"},{"path":"/articles/UsingEPICinR.html","id":"advanced-manual-session-management","dir":"Articles","previous_headings":"2 Running the Model","what":"Advanced: Manual Session Management","title":"Using EPIC in R","text":"advanced users need fine-grained control (e.g., running multiple simulations one session), can manage sessions manually. backend package C++. languages R/Python, memory allocation taken care . However, C/C++, need allocate memory . also need deallocate memory program done. , function init_session(). init_session() core.R file, calls 3 C functions: Cdeallocate_resources(), Callocate_resources(), Cinit_session(). don’t really need know work, basically allocate/deallocate memory. need call run anything: C++, program successful returns 0, see R console.","code":"init_session()"},{"path":"/articles/UsingEPICinR.html","id":"step-1-initialize-the-session","dir":"Articles","previous_headings":"2 Running the Model > Advanced: Manual Session Management","what":"Step 1: Initialize the Session","title":"Using EPIC in R","text":"(Already shown init_session())","code":""},{"path":"/articles/UsingEPICinR.html","id":"step-2-set-the-inputs","dir":"Articles","previous_headings":"2 Running the Model > Advanced: Manual Session Management","what":"Step 2: Set the Inputs","title":"Using EPIC in R","text":"default input values created file input.R. can retrieve values using get_input(). function returns nested list. returned list contains values, help ref hold sub-lists. help ref contain explanations regarding input parameter means. easier notation refer retrieved inputs input: list main categories input$values returns: Input Value Categories: input$values returns list lists, can explore set specific inputs using $ operator. example shown :","code":"input <- get_input() #changing time_horizon which can be accessed through global_parameters input$values$global_parameters$time_horizon <- 5 #changing age0, which can be accessed through global_parameters, from the default value of 40 to 50 input$values$global_parameters$age0 <- 50 #changing p_females, which can be accessed through agent, from the default value 0.5 to 0.6. input$values$agent$p_female <- 0.6"},{"path":"/articles/UsingEPICinR.html","id":"step-3-run","dir":"Articles","previous_headings":"2 Running the Model > Advanced: Manual Session Management","what":"Step 3: Run","title":"Using EPIC in R","text":"changing inputs can provide run() function. run() function two arguments: max_n_agents input. created input Step 2, can put ; otherwise, can leave input argument blank. max_n_agents argument many people want model. default set maximum integer computer allow. can set lower number like (might run faster).","code":"#to run the simulation with default parameters run() #to run the simulation with custom parameters run(max_n_agents = 1000, input = input$values)"},{"path":"/articles/UsingEPICinR.html","id":"step-4-results","dir":"Articles","previous_headings":"2 Running the Model > Advanced: Manual Session Management","what":"Step 4: Results","title":"Using EPIC in R","text":"run model simulation, several functions access results. first function Cget_output() shows overall results: Basic Output Cget_output(): second function Cget_output_ex() returns large list results: Extended Output Cget_output_ex(): extended output includes detailed breakdowns : - Year (annual results time horizon) - Age groups - Sex - COPD severity (GOLD stages) - Smoking status Key tables extended output: - n_death - Deaths year, age, sex - n_COPD - COPD prevalence year, age, sex - cost - Costs year category - qaly - QALYs year health state - exacerbation - Exacerbations year, severity, GOLD stage Important Notes: - EPIC starts simulating patients age 40 - Comorbidities implemented current version epicR full snippet code: studies, access entire event history simulated population might beneficial. Capturing event history possible setting record_mode setting. Cget_all_events_matrix() function returns events matrix, every event every patient. Note might need large amount memory available, want collect event history large number patients. can change record mode simulation accessing settings$record_mode shown . different record modes mean: Record Modes: shown code snippet , can inspect event matrix Cget_all_events_matrix() converting data frame using .data.frame(Cget_all_events_matrix()). data frame consists 33 columns, including: Key Event Matrix Columns: events data frame, type event code corresponding table : Event Type Codes: *Note: Doctor visit Medication change implemented version epicR","code":"results <- Cget_output() resultsExra <- Cget_output_ex() init_session() input <- get_input() input$values$global_parameters$time_horizon <- 5 run(input=input$values) results <- Cget_output() resultsExra <- Cget_output_ex() terminate_session() settings <- get_default_settings() # record_mode = 2 indicates recording every event that occurs settings$record_mode <- 2 #n_base_agents is the number of people at time 0. settings$n_base_agents <- 1e4 init_session(settings = settings) run() results <- Cget_output() events <- as.data.frame(Cget_all_events_matrix()) head(events) terminate_session()"},{"path":"/articles/UsingEPICinR.html","id":"closed-cohort-analysis","dir":"Articles","previous_headings":"2 Running the Model","what":"Closed-cohort analysis","title":"Using EPIC in R","text":"Closed-cohort analysis can specified changing appropriate input parameters:","code":"library(epicR) input <- get_input(closed_cohort = 1)$values init_session() run(input=input) Cget_output() terminate_session()"},{"path":"/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Mohsen Sadatsafavi. Author, copyright holder. Amin Adibi. Author, maintainer. Kate Johnson. Author.","code":""},{"path":"/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Sadatsafavi M, Adibi , Johnson K (2025). epicR: R Package Evaluation Platform COPD. R package version 0.9.0.","code":"@Manual{,   title = {epicR: R Package for Evaluation Platform in COPD},   author = {Mohsen Sadatsafavi and Amin Adibi and Kate Johnson},   year = {2025},   note = {R package version 0.9.0}, }"},{"path":"/claude.html","id":null,"dir":"","previous_headings":"","what":"Claude Code Instructions for epicR","title":"Claude Code Instructions for epicR","text":"file contains instructions AI assistants (like Claude) working epicR package.","code":""},{"path":"/claude.html","id":"when-to-run-devtoolsdocument","dir":"","previous_headings":"","what":"When to Run devtools::document()","title":"Claude Code Instructions for epicR","text":"MUST run devtools::document() : Adding new exported functions (@export) Changing function parameters Updating roxygen documentation (#' comments) Adding removing functions Adding, removing, changing C++ functions // [[Rcpp::export]] regenerates src/RcppExports.cpp R/RcppExports.R Changing package-level documentation (e.g., R/epicR.R) Run like : : - Regenerates man/*.Rd documentation files roxygen comments - Updates NAMESPACE file exports - Regenerates Rcpp exports C++ files changed - Ensures package documentation sync code Rule thumb: doubt, run devtools::document() - ’s safe fast!","code":"devtools::document()"},{"path":"/claude.html","id":"after-making-changes","dir":"","previous_headings":"","what":"After Making Changes","title":"Claude Code Instructions for epicR","text":"Always test package can : 1. Documented: devtools::document() 2. Loaded: devtools::load_all() 3. Checked: devtools::check() (time permits)","code":""},{"path":[]},{"path":"/claude.html","id":"adding-a-new-function","dir":"","previous_headings":"Common Workflows","what":"Adding a New Function","title":"Claude Code Instructions for epicR","text":"Write function appropriate R file R/ Add roxygen documentation : Run devtools::document() Test devtools::load_all()","code":"#' Brief description #' #' Longer description #' #' @param param1 description #' @return what it returns #' @export #' @examples #' \\dontrun{ #' example_code() #' } function_name <- function(param1) {   # implementation }"},{"path":"/claude.html","id":"modifying-function-signatures","dir":"","previous_headings":"Common Workflows","what":"Modifying Function Signatures","title":"Claude Code Instructions for epicR","text":"Update function parameters Update @param documentation Run devtools::document() Check examples still work","code":""},{"path":"/claude.html","id":"modifying-cc-code","dir":"","previous_headings":"Common Workflows","what":"Modifying C/C++ Code","title":"Claude Code Instructions for epicR","text":"changing files src/: 1. Make changes 2. modified C++ functions exported R (via Rcpp): - Run devtools::document() update RcppExports 3. Run devtools::load_all() (recompiles automatically) 4. Test thoroughly 5. Run devtools::check() ensure compilation warnings Important: Changes C++ functions // [[Rcpp::export]] require devtools::document() regenerate src/RcppExports.cpp R/RcppExports.R.","code":""},{"path":"/claude.html","id":"updating-vignettes","dir":"","previous_headings":"Common Workflows","what":"Updating Vignettes","title":"Claude Code Instructions for epicR","text":"modifying .Rmd files vignettes/: 1. Knit vignette test: rmarkdown::render(\"vignettes/filename.Rmd\") 2. Build vignettes: devtools::build_vignettes() 3. Check output HTML looks correct","code":""},{"path":[]},{"path":"/claude.html","id":"configuration-files","dir":"","previous_headings":"Package-Specific Notes","what":"Configuration Files","title":"Claude Code Instructions for epicR","text":"package uses JSON config files inst/config/: - config_canada.json - Canadian parameters - config_us.json - US parameters config must \"jurisdiction\" field top level.","code":""},{"path":"/claude.html","id":"session-management","dir":"","previous_headings":"Package-Specific Notes","what":"Session Management","title":"Claude Code Instructions for epicR","text":"package two APIs: 1. Simple: simulate() - handles sessions automatically 2. Advanced: Manual init_session() + run() + terminate_session() Keep working backward compatibility.","code":""},{"path":"/claude.html","id":"memory-management","dir":"","previous_headings":"Package-Specific Notes","what":"Memory Management","title":"Claude Code Instructions for epicR","text":"C++ engine allocates memory simulations. Always: - Test memory cleanup terminate_session() - Check memory leaks long-running sessions - Verify auto-cleanup works simulate()","code":""},{"path":"/claude.html","id":"compilation","dir":"","previous_headings":"Package-Specific Notes","what":"Compilation","title":"Claude Code Instructions for epicR","text":"package includes: - C++ code using Rcpp/RcppArmadillo - configure script checks gfortran - Platform-specific compilation via Makevars.Don’t modify src/Makevars directly - ’s generated configure.","code":""},{"path":"/claude.html","id":"testing-checklist","dir":"","previous_headings":"","what":"Testing Checklist","title":"Claude Code Instructions for epicR","text":"committing changes package functions: Run devtools::document() Run devtools::load_all() successfully Test changed functions interactively Verify new warnings devtools::check() Update relevant vignettes user-facing changes Update README.md affects Quick Guide","code":""},{"path":"/claude.html","id":"git-workflow","dir":"","previous_headings":"","what":"Git Workflow","title":"Claude Code Instructions for epicR","text":"Make changes Run devtools::document() needed Test changes Stage files: git add <files> Commit descriptive message Push GitHub","code":""},{"path":[]},{"path":"/claude.html","id":"object-not-found-after-adding-function","dir":"","previous_headings":"Common Issues","what":"“object not found” after adding function","title":"Claude Code Instructions for epicR","text":"Forgot run devtools::document() Missing @export tag","code":""},{"path":"/claude.html","id":"namespace-conflicts","dir":"","previous_headings":"Common Issues","what":"NAMESPACE conflicts","title":"Claude Code Instructions for epicR","text":"Run devtools::document() regenerate Check duplicate @export tags","code":""},{"path":"/claude.html","id":"vignette-wont-build","dir":"","previous_headings":"Common Issues","what":"Vignette won’t build","title":"Claude Code Instructions for epicR","text":"Check R code chunks eval=FALSE examples need sessions Ensure package dependencies DESCRIPTION","code":""},{"path":"/claude.html","id":"resources","dir":"","previous_headings":"","what":"Resources","title":"Claude Code Instructions for epicR","text":"R Packages Book roxygen2 documentation Rcpp documentation","code":""},{"path":"/index.html","id":"epicr","dir":"","previous_headings":"","what":"R Package for Evaluation Platform in COPD","title":"R Package for Evaluation Platform in COPD","text":"R package Evaluation Platform COPD (EPIC).","code":""},{"path":"/index.html","id":"overview","dir":"","previous_headings":"","what":"Overview","title":"R Package for Evaluation Platform in COPD","text":"epicR provides interface interact Evaluation Platform COPD (EPIC), discrete-event-simulation (DES) whole-disease model Chronic Onstructive Pulmonary Disease.","code":""},{"path":[]},{"path":"/index.html","id":"prerequisites","dir":"","previous_headings":"Installation","what":"Prerequisites","title":"R Package for Evaluation Platform in COPD","text":"epicR requires R version 4.5.0 later uses Rcpp/RcppArmadillo C++ integration, requires compilation tools installed system.","code":""},{"path":"/index.html","id":"windows-windows-10-or-later","dir":"","previous_headings":"Installation","what":"Windows (Windows 10 or Later)","title":"R Package for Evaluation Platform in COPD","text":"Install R (version 4.5.0 later) Download install latest version R https://cran.r-project.org/bin/windows/base/ Install RStudio (Optional Recommended) Download install RStudio https://posit.co/download/rstudio-desktop/ Install Rtools Download install latest version Rtools https://cran.r-project.org/bin/windows/Rtools/ Important: installation, make sure check option add Rtools system PATH R 4.3.0+, install Rtools43 later R 4.2.x, install Rtools42 Verify Rtools Installation Open R RStudio run: return path make executable. returns empty string, Rtools properly configured. Install pak package Install epicR GitHub","code":"# Check if Rtools is available Sys.which(\"make\") install.packages('pak') pak::pkg_install('resplab/epicR')"},{"path":"/index.html","id":"macos-macos-11-big-sur-or-later","dir":"","previous_headings":"Installation","what":"macOS (macOS 11 Big Sur or Later)","title":"R Package for Evaluation Platform in COPD","text":"Install R (version 4.5.0 later) Download install latest version R https://cran.r-project.org/bin/macosx/ Apple Silicon (M1/M2/M3): Download arm64 version Intel Macs: Download x86_64 version Install RStudio (Optional Recommended) Download install RStudio https://posit.co/download/rstudio-desktop/ Install Xcode Command Line Tools Open Terminal run: Follow prompts complete installation Install gfortran Apple Silicon (M1/M2/M3): Intel Macs: Download https://github.com/fxcoudert/gfortran--macOS/releases Choose installer matches macOS version Verify Compiler Installation Open Terminal run: commands return version information Install pak package Open R RStudio run: Install epicR GitHub","code":"xcode-select --install curl -O https://mac.r-project.org/tools/gfortran-12.2-universal.pkg sudo installer -pkg gfortran-12.2-universal.pkg -target / # Check clang clang --version  # Check gfortran gfortran --version install.packages('pak') pak::pkg_install('resplab/epicR')"},{"path":[]},{"path":"/index.html","id":"windows-issues","dir":"","previous_headings":"Installation > Troubleshooting","what":"Windows Issues","title":"R Package for Evaluation Platform in COPD","text":"encounter compilation errors, ensure Rtools PATH. can check R: PATH doesn’t include Rtools, may need add manually reinstall Rtools PATH option enabled.","code":"Sys.getenv(\"PATH\")"},{"path":"/index.html","id":"macos-issues","dir":"","previous_headings":"Installation > Troubleshooting","what":"macOS Issues","title":"R Package for Evaluation Platform in COPD","text":"Linker Error: ld: library 'emutls_w' found error occurs gfortran properly installed configured. Try solutions: Solution 1: Install gfortran (see step 4 ) installation, restart R try installing package : Solution 2: Configure R use built-libraries (prefer install gfortran): try installing package R. Common Issues: - encounter errors related missing compilers installation, try restarting R session computer. - Apple Silicon Macs, ensure ’re using arm64 version R compatible compilers. - previously installed older versions compilers, may interfere. Consider cleaning : bash   # run issues old compiler installations   sudo rm -rf /usr/local/clang*   sudo rm -rf /usr/local/gfortran   rm ~/.R/Makevars  # Remove custom compiler settings","code":"pak::pkg_install('resplab/epicR') mkdir -p ~/.R cat > ~/.R/Makevars << 'EOF' FLIBS=-L$(R_HOME)/lib -lRblas -lRlapack EOF"},{"path":"/index.html","id":"ubuntu-2204-and-later","dir":"","previous_headings":"Installation","what":"Ubuntu 22.04 and Later","title":"R Package for Evaluation Platform in COPD","text":"Install R executing following commands Terminal: installation successful, able start R: Download Install R Studio https://posit.co/download/rstudio-desktop/ Install libcurl Terminal: Using either R session Terminal R Studio, install package pak: Install epicR GitHub:","code":"sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E298A3A825C0D65DFD57CBB651716619E084DAB9 sudo add-apt-repository 'deb [arch=amd64,i386] https://cran.rstudio.com/bin/linux/ubuntu xenial/' sudo apt-get update sudo apt-get install r-base sudo -i R sudo apt-get install libcurl4-openssl-dev libssl-dev r-base-dev install.packages('pak') pak::pkg_install('resplab/epicR')"},{"path":[]},{"path":"/index.html","id":"simple-usage-recommended","dir":"","previous_headings":"","what":"Simple Usage (Recommended)","title":"R Package for Evaluation Platform in COPD","text":"easiest way run EPIC simulate() function, handles session management automatically provides progress information including real-time progress bar:","code":"library(epicR)  # Run with defaults (Canada, 20 year horizon, 60,000 agents) results <- simulate() print(results$basic) # Shows configuration, progress bar (10% 20% ... 100%), and elapsed time  # Run for US with custom parameters results <- simulate(jurisdiction = \"us\", time_horizon = 10, n_agents = 100000)  # Quick test with fewer agents (faster) results <- simulate(n_agents = 10000)  # Get both basic and extended results results <- simulate(return_extended = TRUE) print(results$basic) print(results$extended)  # Get event history (automatically enables event recording) results <- simulate(return_events = TRUE) print(head(results$events))  # Get everything with custom settings results <- simulate(   jurisdiction = \"us\",   time_horizon = 15,   n_agents = 50000,   return_extended = TRUE,   return_events = TRUE ) # Returns: results$basic, results$extended, results$events"},{"path":"/index.html","id":"advanced-usage","dir":"","previous_headings":"","what":"Advanced Usage","title":"R Package for Evaluation Platform in COPD","text":"advanced users need control (e.g., running multiple simulations one session), can manage sessions manually: can also customize inputs:","code":"library(epicR)  # Initialize session once init_session()  # Run multiple simulations run() results1 <- Cget_output()  run()  # run again with same session results2 <- Cget_output()  # Clean up when done terminate_session() init_session() input <- get_input() input$values$global_parameters$time_horizon <- 5 run(input = input$values) results <- Cget_output() terminate_session()"},{"path":"/index.html","id":"jurisdiction-specific-configuration","dir":"","previous_headings":"","what":"Jurisdiction-Specific Configuration","title":"R Package for Evaluation Platform in COPD","text":"EPIC now supports jurisdiction-specific parameter sets enable modeling different countries/regions. Currently, Canadian parameters fully configured, US parameters available template.","code":""},{"path":"/index.html","id":"using-canadian-parameters-default","dir":"","previous_headings":"Jurisdiction-Specific Configuration","what":"Using Canadian Parameters (Default)","title":"R Package for Evaluation Platform in COPD","text":"","code":"# Canadian parameters are used by default input <- get_input() # or explicitly specify: input <- get_input(jurisdiction = \"canada\")"},{"path":"/index.html","id":"using-us-parameters","dir":"","previous_headings":"Jurisdiction-Specific Configuration","what":"Using US Parameters","title":"R Package for Evaluation Platform in COPD","text":"","code":"# Note: US parameters must be configured first (see Configuration section) input <- get_input(jurisdiction = \"us\")"},{"path":"/index.html","id":"parameter-override","dir":"","previous_headings":"Jurisdiction-Specific Configuration","what":"Parameter Override","title":"R Package for Evaluation Platform in COPD","text":"Function parameters still override jurisdiction defaults:","code":"# Use Canadian defaults but change time horizon input <- get_input(jurisdiction = \"canada\", time_horizon = 10)"},{"path":[]},{"path":"/index.html","id":"user-customizable-configuration-files","dir":"","previous_headings":"Configuration","what":"User-Customizable Configuration Files","title":"R Package for Evaluation Platform in COPD","text":"epicR now supports user-customizable configuration files. load package first time, configuration files automatically copied home directory ~/.epicR/config/, allowing modify model parameters without changing package code.","code":""},{"path":"/index.html","id":"key-features","dir":"","previous_headings":"Configuration > User-Customizable Configuration Files","what":"Key Features:","title":"R Package for Evaluation Platform in COPD","text":"Automatic Setup: Config files copied home directory first load Easy Customization: Edit JSON files ~/.epicR/config/ adjust parameters Automatic Detection: package automatically uses custom configs Simple Reset: Return defaults anytime reset_user_configs()","code":""},{"path":"/index.html","id":"configuration-management-functions","dir":"","previous_headings":"Configuration > User-Customizable Configuration Files","what":"Configuration Management Functions:","title":"R Package for Evaluation Platform in COPD","text":"","code":"# View config directory location get_user_config_dir()  # Open config directory in file explorer open_user_config_dir()  # List available jurisdictions list_available_jurisdictions()  # Validate your configuration validate_config(\"canada\", user = TRUE)  # Reset to package defaults reset_user_configs()  # All configs reset_user_configs(\"canada\")  # Specific jurisdiction"},{"path":"/index.html","id":"customizing-parameters","dir":"","previous_headings":"Configuration > User-Customizable Configuration Files","what":"Customizing Parameters:","title":"R Package for Evaluation Platform in COPD","text":"detailed instructions, see User Configuration Guide.","code":"# 1. Open config directory open_user_config_dir()  # 2. Edit config_canada.json or config_us.json with your parameters  # 3. Your changes are automatically used input <- get_input(jurisdiction = \"canada\")"},{"path":"/index.html","id":"package-configuration-files","dir":"","previous_headings":"Configuration","what":"Package Configuration Files","title":"R Package for Evaluation Platform in COPD","text":"Default configurations stored package inst/config/: config_canada.json - Canadian parameter set (fully configured) config_us.json - US parameter template (requires configuration)","code":""},{"path":"/index.html","id":"configuring-us-parameters","dir":"","previous_headings":"Configuration","what":"Configuring US Parameters","title":"R Package for Evaluation Platform in COPD","text":"use EPIC US populations, replace placeholder values config_us.json appropriate US-specific data: Demographics (age pyramid, mortality tables) Smoking patterns prevalence Healthcare costs utilization Disease epidemiology parameters Example placeholder format: Replace actual values:","code":"{   \"agent\": {     \"p_female\": \"PLACEHOLDER_US_P_FEMALE\"   } } {   \"agent\": {     \"p_female\": 0.51   } }"},{"path":"/index.html","id":"test-values","dir":"","previous_headings":"Configuration","what":"Test Values","title":"R Package for Evaluation Platform in COPD","text":"Configuration files also include jurisdiction-specific test values used package validation: values represent: - population_over_40_2015: Population 40 years age (used scaling test results) - expected_severe_exacerbations_per_year: Expected number severe exacerbations per year validation - expected_severe_exac_tolerance: Tolerance level test assertions US parameters, replace appropriate US values: studies, access entire event history simulated population might beneficial. Capturing event history possible setting record_mode setting. Note might need large amount memory available, want collect event history large number patients. events data frame, type event code corresponding table :","code":"{   \"test_values\": {     \"population_over_40_2015\": 18600000,     \"expected_severe_exacerbations_per_year\": 100000,     \"expected_severe_exac_tolerance\": 5000   } } {   \"test_values\": {     \"population_over_40_2015\": 130000000,     \"expected_severe_exacerbations_per_year\": 700000,     \"expected_severe_exac_tolerance\": 35000   } } settings <- get_default_settings() settings$record_mode <- 2 settings$n_base_agents <- 1e4 init_session(settings = settings) run() results <- Cget_output() events <- as.data.frame(Cget_all_events_matrix()) head(events) terminate_session()"},{"path":"/index.html","id":"closed-cohort-analysis","dir":"","previous_headings":"","what":"Closed-cohort analysis","title":"R Package for Evaluation Platform in COPD","text":"Closed-cohort analysis can specified changing appropriate input parameters. can also combine jurisdiction closed-cohort parameters:","code":"library(epicR) input <- get_input(closed_cohort = 1)$values init_session() run(input=input) Cget_output() terminate_session() # Canadian closed-cohort analysis input <- get_input(jurisdiction = \"canada\", closed_cohort = 1)$values  # US closed-cohort analysis (once US parameters are configured) input <- get_input(jurisdiction = \"us\", closed_cohort = 1)$values"},{"path":"/index.html","id":"publications-with-epicr","dir":"","previous_headings":"","what":"Publications with epicR","title":"R Package for Evaluation Platform in COPD","text":"following publications used epicR analyses: Yan, K., Duan, K. Johnson, K.M., 2025. Development Validation EPIC-USA: COPD Policy Model United States. American Journal Respiratory Critical Care Medicine, 211(Abstracts), pp.A7130-A7130. Mountain, R., Kim, D. Johnson, K.M., 2023. Budget impact analysis adopting primary care–based case detection chronic obstructive pulmonary disease Canadian general population. Canadian Medical Association Open Access Journal, 11(6), pp.E1048-E1058. Mountain, R., Duan, K.. Johnson, K.M., 2024. Benefit–harm analysis earlier initiation triple therapy prevention acute exacerbation patients chronic obstructive pulmonary disease. Annals American Thoracic Society, 21(8), pp.1139-1146. Johnson KM, Sadatsafavi M, Adibi , Lynd L, Harrison M, Tavakoli H, Sin DD, Bryan S. Cost effectiveness case detection strategies early detection COPD. Applied Health Economics Health Policy. 2021 Mar;19(2):203-15. https://doi.org/10.1007/s40258-020-00616-2","code":""},{"path":"/index.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"R Package for Evaluation Platform in COPD","text":"Please cite: Sadatsafavi, M., Ghanbarian, S., Adibi, ., Johnson, K., Mark FitzGerald, J., Flanagan, W., Sin, D. (2019). Development Validation Evaluation Platform COPD (EPIC): Population-Based Outcomes Model COPD Canada. Medical Decision Making. https://doi.org/10.1177/0272989X18824098","code":""},{"path":"/reference/Cget_agent_events.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns all events of an agent. — Cget_agent_events","title":"Returns all events of an agent. — Cget_agent_events","text":"Returns events agent.","code":""},{"path":"/reference/Cget_agent_events.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns all events of an agent. — Cget_agent_events","text":"","code":"Cget_agent_events(id)"},{"path":"/reference/Cget_agent_events.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Returns all events of an agent. — Cget_agent_events","text":"id agent ID.","code":""},{"path":"/reference/Cget_agent_events.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns all events of an agent. — Cget_agent_events","text":"events agent id","code":""},{"path":"/reference/Cget_agent_size_bytes.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns the size of agent struct in bytes — Cget_agent_size_bytes","title":"Returns the size of agent struct in bytes — Cget_agent_size_bytes","text":"Returns size agent struct bytes","code":""},{"path":"/reference/Cget_agent_size_bytes.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns the size of agent struct in bytes — Cget_agent_size_bytes","text":"","code":"Cget_agent_size_bytes()"},{"path":"/reference/Cget_agent_size_bytes.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns the size of agent struct in bytes — Cget_agent_size_bytes","text":"size agent struct bytes","code":""},{"path":"/reference/Cget_all_events.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns all events. — Cget_all_events","title":"Returns all events. — Cget_all_events","text":"Returns events.","code":""},{"path":"/reference/Cget_all_events.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns all events. — Cget_all_events","text":"","code":"Cget_all_events()"},{"path":"/reference/Cget_all_events.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns all events. — Cget_all_events","text":"events","code":""},{"path":"/reference/Cget_all_events_matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns a matrix containing all events — Cget_all_events_matrix","title":"Returns a matrix containing all events — Cget_all_events_matrix","text":"Returns matrix containing events","code":""},{"path":"/reference/Cget_all_events_matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns a matrix containing all events — Cget_all_events_matrix","text":"","code":"Cget_all_events_matrix()"},{"path":"/reference/Cget_all_events_matrix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns a matrix containing all events — Cget_all_events_matrix","text":"matrix containing events","code":""},{"path":"/reference/Cget_event.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns the events stack. — Cget_event","title":"Returns the events stack. — Cget_event","text":"Returns events stack.","code":""},{"path":"/reference/Cget_event.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns the events stack. — Cget_event","text":"","code":"Cget_event(i)"},{"path":"/reference/Cget_event.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Returns the events stack. — Cget_event","text":"number event","code":""},{"path":"/reference/Cget_event.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns the events stack. — Cget_event","text":"events","code":""},{"path":"/reference/Cget_events_by_type.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns all events of a certain type. — Cget_events_by_type","title":"Returns all events of a certain type. — Cget_events_by_type","text":"Returns events certain type.","code":""},{"path":"/reference/Cget_events_by_type.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns all events of a certain type. — Cget_events_by_type","text":"","code":"Cget_events_by_type(event_type)"},{"path":"/reference/Cget_events_by_type.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Returns all events of a certain type. — Cget_events_by_type","text":"event_type number","code":""},{"path":"/reference/Cget_events_by_type.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns all events of a certain type. — Cget_events_by_type","text":"events type event_type","code":""},{"path":"/reference/Cget_inputs.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns inputs — Cget_inputs","title":"Returns inputs — Cget_inputs","text":"Returns inputs","code":""},{"path":"/reference/Cget_inputs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns inputs — Cget_inputs","text":"","code":"Cget_inputs()"},{"path":"/reference/Cget_inputs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns inputs — Cget_inputs","text":"inputs","code":""},{"path":"/reference/Cget_n_events.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns total number of events. — Cget_n_events","title":"Returns total number of events. — Cget_n_events","text":"Returns total number events.","code":""},{"path":"/reference/Cget_n_events.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns total number of events. — Cget_n_events","text":"","code":"Cget_n_events()"},{"path":"/reference/Cget_n_events.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns total number of events. — Cget_n_events","text":"number events","code":""},{"path":"/reference/Cget_output.html","id":null,"dir":"Reference","previous_headings":"","what":"Main outputs of the current run. — Cget_output","title":"Main outputs of the current run. — Cget_output","text":"Main outputs current run.","code":""},{"path":"/reference/Cget_output.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Main outputs of the current run. — Cget_output","text":"","code":"Cget_output()"},{"path":"/reference/Cget_output.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Main outputs of the current run. — Cget_output","text":"number agents, cumulative time, number deaths, number COPD cases, well exacerbation statistics QALYs.","code":""},{"path":"/reference/Cget_output_ex.html","id":null,"dir":"Reference","previous_headings":"","what":"Extra outputs from the model — Cget_output_ex","title":"Extra outputs from the model — Cget_output_ex","text":"Extra outputs model","code":""},{"path":"/reference/Cget_output_ex.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extra outputs from the model — Cget_output_ex","text":"","code":"Cget_output_ex()"},{"path":"/reference/Cget_output_ex.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extra outputs from the model — Cget_output_ex","text":"Extra outputs model.","code":""},{"path":"/reference/Cget_progress.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns current simulation progress. — Cget_progress","title":"Returns current simulation progress. — Cget_progress","text":"Returns current simulation progress.","code":""},{"path":"/reference/Cget_progress.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns current simulation progress. — Cget_progress","text":"","code":"Cget_progress()"},{"path":"/reference/Cget_progress.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns current simulation progress. — Cget_progress","text":"Number agents processed far (last_id).","code":""},{"path":"/reference/Cget_runtime_stats.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns run time stats. — Cget_runtime_stats","title":"Returns run time stats. — Cget_runtime_stats","text":"Returns run time stats.","code":""},{"path":"/reference/Cget_runtime_stats.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns run time stats. — Cget_runtime_stats","text":"","code":"Cget_runtime_stats()"},{"path":"/reference/Cget_runtime_stats.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns run time stats. — Cget_runtime_stats","text":"agent size well memory random variable fill stats.","code":""},{"path":"/reference/Cget_settings.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns current settings. — Cget_settings","title":"Returns current settings. — Cget_settings","text":"Returns current settings.","code":""},{"path":"/reference/Cget_settings.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns current settings. — Cget_settings","text":"","code":"Cget_settings()"},{"path":"/reference/Cget_settings.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns current settings. — Cget_settings","text":"current settings.","code":""},{"path":"/reference/Cget_smith.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns agent Smith. — Cget_smith","title":"Returns agent Smith. — Cget_smith","text":"Returns agent Smith.","code":""},{"path":"/reference/Cget_smith.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns agent Smith. — Cget_smith","text":"","code":"Cget_smith()"},{"path":"/reference/Cget_smith.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns agent Smith. — Cget_smith","text":"agent smith.","code":""},{"path":"/reference/Cset_input_var.html","id":null,"dir":"Reference","previous_headings":"","what":"Sets input variables. — Cset_input_var","title":"Sets input variables. — Cset_input_var","text":"Sets input variables.","code":""},{"path":"/reference/Cset_input_var.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Sets input variables. — Cset_input_var","text":"","code":"Cset_input_var(name, value)"},{"path":"/reference/Cset_input_var.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Sets input variables. — Cset_input_var","text":"name string value number","code":""},{"path":"/reference/Cset_input_var.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Sets input variables. — Cset_input_var","text":"0 successful","code":""},{"path":"/reference/Cset_settings_var.html","id":null,"dir":"Reference","previous_headings":"","what":"Sets model settings. — Cset_settings_var","title":"Sets model settings. — Cset_settings_var","text":"Sets model settings.","code":""},{"path":"/reference/Cset_settings_var.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Sets model settings. — Cset_settings_var","text":"","code":"Cset_settings_var(name, value)"},{"path":"/reference/Cset_settings_var.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Sets model settings. — Cset_settings_var","text":"name name value value","code":""},{"path":"/reference/Cset_settings_var.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Sets model settings. — Cset_settings_var","text":"0 successful.","code":""},{"path":"/reference/calc_event_stack_size.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate recommended event_stack_size for a given number of agents — calc_event_stack_size","title":"Calculate recommended event_stack_size for a given number of agents — calc_event_stack_size","text":"Calculate recommended event_stack_size given number agents","code":""},{"path":"/reference/calc_event_stack_size.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate recommended event_stack_size for a given number of agents — calc_event_stack_size","text":"","code":"calc_event_stack_size(n_agents, time_horizon = 20)"},{"path":"/reference/calc_event_stack_size.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate recommended event_stack_size for a given number of agents — calc_event_stack_size","text":"n_agents number agents simulate time_horizon simulation time horizon years (default 20)","code":""},{"path":"/reference/calc_event_stack_size.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate recommended event_stack_size for a given number of agents — calc_event_stack_size","text":"recommended event_stack_size","code":""},{"path":"/reference/calibrate_COPD_inc.html","id":null,"dir":"Reference","previous_headings":"","what":"Solves stochastically for COPD incidence rate equation. — calibrate_COPD_inc","title":"Solves stochastically for COPD incidence rate equation. — calibrate_COPD_inc","text":"Solves stochastically COPD incidence rate equation.","code":""},{"path":"/reference/calibrate_COPD_inc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Solves stochastically for COPD incidence rate equation. — calibrate_COPD_inc","text":"","code":"calibrate_COPD_inc(nIterations = 100, nPatients = 1e+05, time_horizon = 20)"},{"path":"/reference/calibrate_COPD_inc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Solves stochastically for COPD incidence rate equation. — calibrate_COPD_inc","text":"nIterations number iterations numberical solution nPatients number simulated agents. time_horizon years","code":""},{"path":"/reference/calibrate_COPD_inc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Solves stochastically for COPD incidence rate equation. — calibrate_COPD_inc","text":"regression co-efficients files","code":""},{"path":"/reference/calibrate_explicit_mortality.html","id":null,"dir":"Reference","previous_headings":"","what":"Calibrates explicit mortality — calibrate_explicit_mortality","title":"Calibrates explicit mortality — calibrate_explicit_mortality","text":"Calibrates explicit mortality","code":""},{"path":"/reference/calibrate_explicit_mortality.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calibrates explicit mortality — calibrate_explicit_mortality","text":"","code":"calibrate_explicit_mortality(n_sim = 10^8)"},{"path":"/reference/calibrate_explicit_mortality.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calibrates explicit mortality — calibrate_explicit_mortality","text":"n_sim number agents","code":""},{"path":"/reference/calibrate_explicit_mortality.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calibrates explicit mortality — calibrate_explicit_mortality","text":"difference mortality rates life table","code":""},{"path":"/reference/calibrate_explicit_mortality2.html","id":null,"dir":"Reference","previous_headings":"","what":"Calibrates explicit mortality by Amin — calibrate_explicit_mortality2","title":"Calibrates explicit mortality by Amin — calibrate_explicit_mortality2","text":"Calibrates explicit mortality Amin","code":""},{"path":"/reference/calibrate_explicit_mortality2.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calibrates explicit mortality by Amin — calibrate_explicit_mortality2","text":"","code":"calibrate_explicit_mortality2(n_sim = 10^7)"},{"path":"/reference/calibrate_explicit_mortality2.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calibrates explicit mortality by Amin — calibrate_explicit_mortality2","text":"n_sim number agents","code":""},{"path":"/reference/calibrate_explicit_mortality2.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calibrates explicit mortality by Amin — calibrate_explicit_mortality2","text":"difference mortality rates life table","code":""},{"path":"/reference/calibrate_smoking.html","id":null,"dir":"Reference","previous_headings":"","what":"Calibrates smoking — calibrate_smoking","title":"Calibrates smoking — calibrate_smoking","text":"Calibrates smoking","code":""},{"path":"/reference/calibrate_smoking.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calibrates smoking — calibrate_smoking","text":"","code":"calibrate_smoking()"},{"path":"/reference/calibrate_smoking.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calibrates smoking — calibrate_smoking","text":"TODO","code":""},{"path":"/reference/epicR-package.html","id":null,"dir":"Reference","previous_headings":"","what":"epicR package — epicR-package","title":"epicR package — epicR-package","text":"Evaluation Platform COPD (EPIC) R Package","code":""},{"path":"/reference/epicR-package.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"epicR package — epicR-package","text":"See README GitHub","code":""},{"path":"/reference/epicR-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"epicR package — epicR-package","text":"Maintainer: Amin Adibi adibi@alumni.ubc.ca Authors: Mohsen Sadatsafavi mohsen.sadatsafavi@ubc.ca [copyright holder] Kate Johnson kate.johnson@alumni.ubc.ca","code":""},{"path":"/reference/estimate_memory_required.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate memory required for simulation — estimate_memory_required","title":"Estimate memory required for simulation — estimate_memory_required","text":"Estimate memory required simulation","code":""},{"path":"/reference/estimate_memory_required.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate memory required for simulation — estimate_memory_required","text":"","code":"estimate_memory_required(n_agents, record_mode = 0, time_horizon = 20)"},{"path":"/reference/estimate_memory_required.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate memory required for simulation — estimate_memory_required","text":"n_agents number agents record_mode recording mode (0=none, 1=agent, 2=event, 3=some_event) time_horizon simulation time horizon years","code":""},{"path":"/reference/estimate_memory_required.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate memory required for simulation — estimate_memory_required","text":"estimated memory bytes","code":""},{"path":"/reference/export_figures.html","id":null,"dir":"Reference","previous_headings":"","what":"Runs the model and exports an excel file with all output data — export_figures","title":"Runs the model and exports an excel file with all output data — export_figures","text":"Runs model exports excel file output data","code":""},{"path":"/reference/export_figures.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Runs the model and exports an excel file with all output data — export_figures","text":"","code":"export_figures(nPatients = 10000)"},{"path":"/reference/export_figures.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Runs the model and exports an excel file with all output data — export_figures","text":"nPatients number agents","code":""},{"path":"/reference/export_figures.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Runs the model and exports an excel file with all output data — export_figures","text":"excel file output","code":""},{"path":"/reference/express_matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Express matrix. — express_matrix","title":"Express matrix. — express_matrix","text":"Express matrix.","code":""},{"path":"/reference/express_matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Express matrix. — express_matrix","text":"","code":"express_matrix(mtx)"},{"path":"/reference/express_matrix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Express matrix. — express_matrix","text":"mtx matrix","code":""},{"path":"/reference/get_agent_events.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns events specific to an agent. — get_agent_events","title":"Returns events specific to an agent. — get_agent_events","text":"Returns events specific agent.","code":""},{"path":"/reference/get_agent_events.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns events specific to an agent. — get_agent_events","text":"","code":"get_agent_events(id)"},{"path":"/reference/get_agent_events.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Returns events specific to an agent. — get_agent_events","text":"id Agent number","code":""},{"path":"/reference/get_agent_events.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns events specific to an agent. — get_agent_events","text":"dataframe consisting events specific agent id","code":""},{"path":"/reference/get_agent_size_bytes.html","id":null,"dir":"Reference","previous_headings":"","what":"Get size of agent struct in bytes (from C code) — get_agent_size_bytes","title":"Get size of agent struct in bytes (from C code) — get_agent_size_bytes","text":"Get size agent struct bytes (C code)","code":""},{"path":"/reference/get_agent_size_bytes.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get size of agent struct in bytes (from C code) — get_agent_size_bytes","text":"","code":"get_agent_size_bytes()"},{"path":"/reference/get_agent_size_bytes.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get size of agent struct in bytes (from C code) — get_agent_size_bytes","text":"size bytes","code":""},{"path":"/reference/get_all_events.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns all events. — get_all_events","title":"Returns all events. — get_all_events","text":"Returns events.","code":""},{"path":"/reference/get_all_events.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns all events. — get_all_events","text":"","code":"get_all_events()"},{"path":"/reference/get_all_events.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns all events. — get_all_events","text":"dataframe consisting events.","code":""},{"path":"/reference/get_available_memory.html","id":null,"dir":"Reference","previous_headings":"","what":"Get available system memory (platform-specific) — get_available_memory","title":"Get available system memory (platform-specific) — get_available_memory","text":"Get available system memory (platform-specific)","code":""},{"path":"/reference/get_available_memory.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get available system memory (platform-specific) — get_available_memory","text":"","code":"get_available_memory()"},{"path":"/reference/get_available_memory.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get available system memory (platform-specific) — get_available_memory","text":"available memory bytes","code":""},{"path":"/reference/get_default_settings.html","id":null,"dir":"Reference","previous_headings":"","what":"Exports default settings — get_default_settings","title":"Exports default settings — get_default_settings","text":"Exports default settings","code":""},{"path":"/reference/get_default_settings.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Exports default settings — get_default_settings","text":"","code":"get_default_settings()"},{"path":"/reference/get_default_settings.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Exports default settings — get_default_settings","text":"default settings","code":""},{"path":"/reference/get_errors.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns errors — get_errors","title":"Returns errors — get_errors","text":"Returns errors","code":""},{"path":"/reference/get_errors.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns errors — get_errors","text":"","code":"get_errors()"},{"path":"/reference/get_errors.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns errors — get_errors","text":"text description error messages","code":""},{"path":"/reference/get_events_by_type.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns certain events by type — get_events_by_type","title":"Returns certain events by type — get_events_by_type","text":"Returns certain events type","code":""},{"path":"/reference/get_events_by_type.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns certain events by type — get_events_by_type","text":"","code":"get_events_by_type(event_type)"},{"path":"/reference/get_events_by_type.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Returns certain events by type — get_events_by_type","text":"event_type event_type number","code":""},{"path":"/reference/get_events_by_type.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns certain events by type — get_events_by_type","text":"dataframe consisting events type event_type","code":""},{"path":"/reference/get_input.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns a list of default model input values — get_input","title":"Returns a list of default model input values — get_input","text":"Returns list default model input values","code":""},{"path":"/reference/get_input.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns a list of default model input values — get_input","text":"","code":"get_input(   age0 = 40,   time_horizon = 20,   discount_cost = 0,   discount_qaly = 0.03,   closed_cohort = 0,   jurisdiction = \"canada\" )"},{"path":"/reference/get_input.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Returns a list of default model input values — get_input","text":"age0 Starting age model time_horizon Model time horizon discount_cost Discounting cost outcomes discount_qaly Discounting QALY outcomes closed_cohort Whether model run closed_cohort, open-population default. jurisdiction Jurisdiction model parameters (\"canada\" \"us\")","code":""},{"path":"/reference/get_list_elements.html","id":null,"dir":"Reference","previous_headings":"","what":"Get list elements — get_list_elements","title":"Get list elements — get_list_elements","text":"Get list elements","code":""},{"path":"/reference/get_list_elements.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get list elements — get_list_elements","text":"","code":"get_list_elements(ls, running_name = \"\")"},{"path":"/reference/get_list_elements.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get list elements — get_list_elements","text":"ls ls running_name running_name","code":""},{"path":"/reference/get_sample_output.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns a sample output for a given year and gender. — get_sample_output","title":"Returns a sample output for a given year and gender. — get_sample_output","text":"Returns sample output given year gender.","code":""},{"path":"/reference/get_sample_output.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns a sample output for a given year and gender. — get_sample_output","text":"","code":"get_sample_output(year, sex)"},{"path":"/reference/get_sample_output.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Returns a sample output for a given year and gender. — get_sample_output","text":"year number sex number, 0 male 1 female","code":""},{"path":"/reference/get_sample_output.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns a sample output for a given year and gender. — get_sample_output","text":"specific output","code":""},{"path":"/reference/init_session.html","id":null,"dir":"Reference","previous_headings":"","what":"Initializes a model. Allocates memory to the C engine. — init_session","title":"Initializes a model. Allocates memory to the C engine. — init_session","text":"Initializes model. Allocates memory C engine.","code":""},{"path":"/reference/init_session.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Initializes a model. Allocates memory to the C engine. — init_session","text":"","code":"init_session(settings = get_default_settings())"},{"path":"/reference/init_session.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Initializes a model. Allocates memory to the C engine. — init_session","text":"settings customized settings.","code":""},{"path":"/reference/init_session.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Initializes a model. Allocates memory to the C engine. — init_session","text":"0 successful.","code":""},{"path":"/reference/mvrnormArma.html","id":null,"dir":"Reference","previous_headings":"","what":"Samples from a multivariate normal — mvrnormArma","title":"Samples from a multivariate normal — mvrnormArma","text":"Samples multivariate normal","code":""},{"path":"/reference/mvrnormArma.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Samples from a multivariate normal — mvrnormArma","text":"","code":"mvrnormArma(n, mu, sigma)"},{"path":"/reference/mvrnormArma.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Samples from a multivariate normal — mvrnormArma","text":"n number samples taken mu mean sigma covariance matrix","code":""},{"path":"/reference/mvrnormArma.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Samples from a multivariate normal — mvrnormArma","text":"multivariate normal sample","code":""},{"path":"/reference/report_COPD_by_ctime.html","id":null,"dir":"Reference","previous_headings":"","what":"Reports COPD related stats. — report_COPD_by_ctime","title":"Reports COPD related stats. — report_COPD_by_ctime","text":"Reports COPD related stats.","code":""},{"path":"/reference/report_COPD_by_ctime.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Reports COPD related stats. — report_COPD_by_ctime","text":"","code":"report_COPD_by_ctime(n_sim = 10^6)"},{"path":"/reference/report_COPD_by_ctime.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Reports COPD related stats. — report_COPD_by_ctime","text":"n_sim number simulated agents.","code":""},{"path":"/reference/report_COPD_by_ctime.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Reports COPD related stats. — report_COPD_by_ctime","text":"COPD-related stats","code":""},{"path":"/reference/report_exacerbation_by_time.html","id":null,"dir":"Reference","previous_headings":"","what":"Reports exacerbation-related stats. — report_exacerbation_by_time","title":"Reports exacerbation-related stats. — report_exacerbation_by_time","text":"Reports exacerbation-related stats.","code":""},{"path":"/reference/report_exacerbation_by_time.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Reports exacerbation-related stats. — report_exacerbation_by_time","text":"","code":"report_exacerbation_by_time(n_sim = 10^5)"},{"path":"/reference/report_exacerbation_by_time.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Reports exacerbation-related stats. — report_exacerbation_by_time","text":"n_sim number simulated agents.","code":""},{"path":"/reference/report_exacerbation_by_time.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Reports exacerbation-related stats. — report_exacerbation_by_time","text":"exacerbation-related stats","code":""},{"path":"/reference/resume.html","id":null,"dir":"Reference","previous_headings":"","what":"Resumes running of model. — resume","title":"Resumes running of model. — resume","text":"Resumes running model.","code":""},{"path":"/reference/resume.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Resumes running of model. — resume","text":"","code":"resume(max_n_agents = NULL)"},{"path":"/reference/resume.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Resumes running of model. — resume","text":"max_n_agents maximum number agents","code":""},{"path":"/reference/resume.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Resumes running of model. — resume","text":"0 successful.","code":""},{"path":"/reference/run.html","id":null,"dir":"Reference","previous_headings":"","what":"Runs the model. Auto-initializes if no session is active. — run","title":"Runs the model. Auto-initializes if no session is active. — run","text":"Runs model. Auto-initializes session active.","code":""},{"path":"/reference/run.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Runs the model. Auto-initializes if no session is active. — run","text":"","code":"run(max_n_agents = NULL, input = NULL, settings = NULL, auto_terminate = FALSE)"},{"path":"/reference/run.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Runs the model. Auto-initializes if no session is active. — run","text":"max_n_agents maximum number agents input customized input criteria settings customized settings (used auto-initializing) auto_terminate whether automatically terminate session run (default: FALSE)","code":""},{"path":"/reference/run.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Runs the model. Auto-initializes if no session is active. — run","text":"simulation results successful","code":""},{"path":"/reference/run.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Runs the model. Auto-initializes if no session is active. — run","text":"","code":"if (FALSE) { # \\dontrun{ # Simple usage - everything handled automatically results <- run()  # Or with custom input input <- get_input(jurisdiction = \"us\", time_horizon = 10) results <- run(input = input$values)  # Advanced: manual session management for multiple runs init_session() run() run()  # run again with same session terminate_session() } # }"},{"path":"/reference/sanity_COPD.html","id":null,"dir":"Reference","previous_headings":"","what":"Basic COPD test. — sanity_COPD","title":"Basic COPD test. — sanity_COPD","text":"Basic COPD test.","code":""},{"path":"/reference/sanity_COPD.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Basic COPD test. — sanity_COPD","text":"","code":"sanity_COPD()"},{"path":"/reference/sanity_COPD.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Basic COPD test. — sanity_COPD","text":"validation test results","code":""},{"path":"/reference/sanity_check.html","id":null,"dir":"Reference","previous_headings":"","what":"Basic tests of model functionality. Serious issues if the test does not pass. — sanity_check","title":"Basic tests of model functionality. Serious issues if the test does not pass. — sanity_check","text":"Basic tests model functionality. Serious issues test pass.","code":""},{"path":"/reference/sanity_check.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Basic tests of model functionality. Serious issues if the test does not pass. — sanity_check","text":"","code":"sanity_check()"},{"path":"/reference/sanity_check.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Basic tests of model functionality. Serious issues if the test does not pass. — sanity_check","text":"tests results","code":""},{"path":"/reference/simulate.html","id":null,"dir":"Reference","previous_headings":"","what":"Convenience function: run simulation and return results — simulate","title":"Convenience function: run simulation and return results — simulate","text":"simplified interface handles session management automatically returns results directly. Ideal users. Progress information displayed including: configuration summary, real-time progress bar showing percentage completion (10","code":""},{"path":"/reference/simulate.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convenience function: run simulation and return results — simulate","text":"","code":"simulate(   input = NULL,   settings = NULL,   jurisdiction = \"canada\",   time_horizon = 20,   n_agents = NULL,   return_extended = FALSE,   return_events = FALSE )"},{"path":"/reference/simulate.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convenience function: run simulation and return results — simulate","text":"input customized input criteria (optional) settings customized settings (optional) jurisdiction Jurisdiction model parameters (\"canada\" \"us\") time_horizon Model time horizon years (default: 20) n_agents Number agents simulate (default: 60,000) return_extended whether return extended results addition basic (default: FALSE) return_events whether return event matrix (default: FALSE). TRUE, automatically sets record_mode=2","code":""},{"path":"/reference/simulate.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convenience function: run simulation and return results — simulate","text":"list simulation results (always includes 'basic', optionally 'extended' 'events')","code":""},{"path":"/reference/simulate.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convenience function: run simulation and return results — simulate","text":"","code":"if (FALSE) { # \\dontrun{ # Simplest usage results <- simulate() print(results$basic)  # With custom parameters results <- simulate(jurisdiction = \"us\", time_horizon = 10, n_agents = 100000)  # Quick test with fewer agents results <- simulate(n_agents = 10000)  # With extended output (includes both basic and extended) results <- simulate(return_extended = TRUE) print(results$basic) print(results$extended)  # With event history results <- simulate(return_events = TRUE) print(results$events)  # Event matrix } # }"},{"path":"/reference/terminate_session.html","id":null,"dir":"Reference","previous_headings":"","what":"Terminates a session and releases allocated memory. — terminate_session","title":"Terminates a session and releases allocated memory. — terminate_session","text":"Terminates session releases allocated memory.","code":""},{"path":"/reference/terminate_session.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Terminates a session and releases allocated memory. — terminate_session","text":"","code":"terminate_session()"},{"path":"/reference/terminate_session.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Terminates a session and releases allocated memory. — terminate_session","text":"0 successful.","code":""},{"path":"/reference/test_case_detection.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns results of Case Detection strategies — test_case_detection","title":"Returns results of Case Detection strategies — test_case_detection","text":"Returns results Case Detection strategies","code":""},{"path":"/reference/test_case_detection.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns results of Case Detection strategies — test_case_detection","text":"","code":"test_case_detection(   n_sim = 10000,   p_of_CD = 0.1,   min_age = 40,   min_pack_years = 0,   only_smokers = 0,   CD_method = \"CDQ195\" )"},{"path":"/reference/test_case_detection.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Returns results of Case Detection strategies — test_case_detection","text":"n_sim number agents p_of_CD probability recieving case detection given agent meets selection criteria min_age minimum age can recieve case detection min_pack_years minimum pack years can recieve case detection only_smokers set 1 smokers recieve case detection CD_method Choose one case detection method: CDQ195\", \"CDQ165\", \"FlowMeter\", \"FlowMeter_CDQ\"","code":""},{"path":"/reference/test_case_detection.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns results of Case Detection strategies — test_case_detection","text":"results case detection strategy compared case detection","code":""},{"path":"/reference/validate_COPD.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns results of validation tests for COPD — validate_COPD","title":"Returns results of validation tests for COPD — validate_COPD","text":"function runs validation tests COPD model outputs. estimates baseline prevalence incidence COPD, along sex-specific baseline COPD prevalence. Additionally, calculates baseline prevalence COPD age groups smoking pack-years. also estimates coefficients relationships age, pack-years, smoking status, prevalence COPD.","code":""},{"path":"/reference/validate_COPD.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns results of validation tests for COPD — validate_COPD","text":"","code":"validate_COPD(incident_COPD_k = 1, return_CI = FALSE)"},{"path":"/reference/validate_COPD.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Returns results of validation tests for COPD — validate_COPD","text":"incident_COPD_k number (default=1) incidence rate COPD multiplied. return_CI TRUE, returns 95 percent confidence intervals \"Year\" coefficient","code":""},{"path":"/reference/validate_COPD.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns results of validation tests for COPD — validate_COPD","text":"validation test results","code":""},{"path":"/reference/validate_diagnosis.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns results of validation tests for diagnosis — validate_diagnosis","title":"Returns results of validation tests for diagnosis — validate_diagnosis","text":"function returns table showing proportion COPD patients diagnosed model's runtime. also provides second table breaks proportion diagnosed patients COPD severity. Additionally, function generates plot visualize distribution diagnoses time.","code":""},{"path":"/reference/validate_diagnosis.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns results of validation tests for diagnosis — validate_diagnosis","text":"","code":"validate_diagnosis(n_sim = 10000)"},{"path":"/reference/validate_diagnosis.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Returns results of validation tests for diagnosis — validate_diagnosis","text":"n_sim number agents","code":""},{"path":"/reference/validate_diagnosis.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns results of validation tests for diagnosis — validate_diagnosis","text":"validation test results","code":""},{"path":"/reference/validate_exacerbation.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns results of validation tests for exacerbation rates — validate_exacerbation","title":"Returns results of validation tests for exacerbation rates — validate_exacerbation","text":"function runs validation tests COPD exacerbation rates GOLD stage compares reference values studies CanCOLD, CIHI, Hoogendoorn. simulates exacerbation events, returns key metrics, including overall exacerbation rates, rates GOLD stage, rates diagnosed vs. undiagnosed patients.","code":""},{"path":"/reference/validate_exacerbation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns results of validation tests for exacerbation rates — validate_exacerbation","text":"","code":"validate_exacerbation(base_agents = 10000, input = NULL)"},{"path":"/reference/validate_exacerbation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Returns results of validation tests for exacerbation rates — validate_exacerbation","text":"base_agents Number agents simulation. Default 1e4. input EPIC inputs","code":""},{"path":"/reference/validate_exacerbation.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns results of validation tests for exacerbation rates — validate_exacerbation","text":"validation test results","code":""},{"path":"/reference/validate_gpvisits.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns results of validation tests for GP visits — validate_gpvisits","title":"Returns results of validation tests for GP visits — validate_gpvisits","text":"function returns Average number GP visits sex, COPD severity COPD diagnosis status along plots.","code":""},{"path":"/reference/validate_gpvisits.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns results of validation tests for GP visits — validate_gpvisits","text":"","code":"validate_gpvisits(n_sim = 10000)"},{"path":"/reference/validate_gpvisits.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Returns results of validation tests for GP visits — validate_gpvisits","text":"n_sim number agents","code":""},{"path":"/reference/validate_gpvisits.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns results of validation tests for GP visits — validate_gpvisits","text":"validation test results","code":""},{"path":"/reference/validate_lung_function.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns results of validation tests for lung function — validate_lung_function","title":"Returns results of validation tests for lung function — validate_lung_function","text":"function evaluates FEV1 (Forced Expiratory Volume 1 second) values GOLD stage distributions assess lung function simulated patients.","code":""},{"path":"/reference/validate_lung_function.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns results of validation tests for lung function — validate_lung_function","text":"","code":"validate_lung_function()"},{"path":"/reference/validate_lung_function.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns results of validation tests for lung function — validate_lung_function","text":"validation test results","code":""},{"path":"/reference/validate_medication.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns results of validation tests for medication module. — validate_medication","title":"Returns results of validation tests for medication module. — validate_medication","text":"function returns plots showing medication usage time","code":""},{"path":"/reference/validate_medication.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns results of validation tests for medication module. — validate_medication","text":"","code":"validate_medication(n_sim = 50000)"},{"path":"/reference/validate_medication.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Returns results of validation tests for medication module. — validate_medication","text":"n_sim number agents","code":""},{"path":"/reference/validate_medication.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns results of validation tests for medication module. — validate_medication","text":"validation test results medication","code":""},{"path":"/reference/validate_mortality.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns results of validation tests for mortality rate — validate_mortality","title":"Returns results of validation tests for mortality rate — validate_mortality","text":"function returns table plot difference simulated expected (life table) mortality, sex age.","code":""},{"path":"/reference/validate_mortality.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns results of validation tests for mortality rate — validate_mortality","text":"","code":"validate_mortality(   n_sim = 5e+05,   bgd = 1,   bgd_h = 1,   manual = 1,   exacerbation = 1 )"},{"path":"/reference/validate_mortality.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Returns results of validation tests for mortality rate — validate_mortality","text":"n_sim number simulated agents bgd number bgd_h number manual number exacerbation number","code":""},{"path":"/reference/validate_mortality.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns results of validation tests for mortality rate — validate_mortality","text":"validation test results","code":""},{"path":"/reference/validate_overdiagnosis.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns results of validation tests for overdiagnosis — validate_overdiagnosis","title":"Returns results of validation tests for overdiagnosis — validate_overdiagnosis","text":"function returns proportion non-COPD subjects overdiagnosed model time.","code":""},{"path":"/reference/validate_overdiagnosis.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns results of validation tests for overdiagnosis — validate_overdiagnosis","text":"","code":"validate_overdiagnosis(n_sim = 10000)"},{"path":"/reference/validate_overdiagnosis.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Returns results of validation tests for overdiagnosis — validate_overdiagnosis","text":"n_sim number agents","code":""},{"path":"/reference/validate_overdiagnosis.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns results of validation tests for overdiagnosis — validate_overdiagnosis","text":"validation test results","code":""},{"path":"/reference/validate_payoffs.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns results of validation tests for payoffs, costs and QALYs — validate_payoffs","title":"Returns results of validation tests for payoffs, costs and QALYs — validate_payoffs","text":"Returns results validation tests payoffs, costs QALYs","code":""},{"path":"/reference/validate_payoffs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns results of validation tests for payoffs, costs and QALYs — validate_payoffs","text":"","code":"validate_payoffs(   nPatient = 1e+06,   disableDiscounting = TRUE,   disableExacMortality = TRUE )"},{"path":"/reference/validate_payoffs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Returns results of validation tests for payoffs, costs and QALYs — validate_payoffs","text":"nPatient number simulated patients. Default 1e6. disableDiscounting TRUE, discounting disabled cost QALY calculations. Default: TRUE disableExacMortality TRUE, mortality due exacerbations disabled cost QALY calculations. Default: TRUE","code":""},{"path":"/reference/validate_payoffs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns results of validation tests for payoffs, costs and QALYs — validate_payoffs","text":"validation test results","code":""},{"path":"/reference/validate_population.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns simulated vs. predicted population table and a plot — validate_population","title":"Returns simulated vs. predicted population table and a plot — validate_population","text":"Returns simulated vs. predicted population table plot","code":""},{"path":"/reference/validate_population.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns simulated vs. predicted population table and a plot — validate_population","text":"","code":"validate_population(remove_COPD = 0, incidence_k = 1, savePlots = 0)"},{"path":"/reference/validate_population.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Returns simulated vs. predicted population table and a plot — validate_population","text":"remove_COPD 0 1, indicating whether COPD-caused mortality removed incidence_k number (default=1) incidence rate population multiplied. savePlots 0 1, exports 300 DPI population growth pyramid plots comparing simulated vs. predicted population","code":""},{"path":"/reference/validate_population.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns simulated vs. predicted population table and a plot — validate_population","text":"returns table showing predicted (StatsCan) simulated population values","code":""},{"path":"/reference/validate_smoking.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns results of validation tests for smoking module. — validate_smoking","title":"Returns results of validation tests for smoking module. — validate_smoking","text":"compares simulated smoking prevalence trends observed data assess model's accuracy.","code":""},{"path":"/reference/validate_smoking.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns results of validation tests for smoking module. — validate_smoking","text":"","code":"validate_smoking(remove_COPD = 1, intercept_k = NULL)"},{"path":"/reference/validate_smoking.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Returns results of validation tests for smoking module. — validate_smoking","text":"remove_COPD 0 1. whether remove COPD-related mortality. intercept_k number","code":""},{"path":"/reference/validate_smoking.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns results of validation tests for smoking module. — validate_smoking","text":"validation test results","code":""},{"path":"/reference/validate_survival.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns the Kaplan Meier curve comparing COPD and non-COPD — validate_survival","title":"Returns the Kaplan Meier curve comparing COPD and non-COPD — validate_survival","text":"Returns Kaplan Meier curve comparing COPD non-COPD","code":""},{"path":"/reference/validate_survival.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns the Kaplan Meier curve comparing COPD and non-COPD — validate_survival","text":"","code":"validate_survival(savePlots = FALSE, base_agents = 10000)"},{"path":"/reference/validate_survival.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Returns the Kaplan Meier curve comparing COPD and non-COPD — validate_survival","text":"savePlots TRUE FALSE (default), exports 300 DPI population growth pyramid plots comparing simulated vs. predicted population base_agents Number agents simulation. Default 1e4.","code":""},{"path":"/reference/validate_survival.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns the Kaplan Meier curve comparing COPD and non-COPD — validate_survival","text":"validation test results","code":""},{"path":"/reference/validate_symptoms.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns results of validation tests for Symptoms — validate_symptoms","title":"Returns results of validation tests for Symptoms — validate_symptoms","text":"function plots prevalence cough, dyspnea, phlegm wheeze time GOLD stage.","code":""},{"path":"/reference/validate_symptoms.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns results of validation tests for Symptoms — validate_symptoms","text":"","code":"validate_symptoms(n_sim = 10000)"},{"path":"/reference/validate_symptoms.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Returns results of validation tests for Symptoms — validate_symptoms","text":"n_sim number agents","code":""},{"path":"/reference/validate_symptoms.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns results of validation tests for Symptoms — validate_symptoms","text":"validation test results","code":""},{"path":"/reference/validate_treatment.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns results of validation tests for Treatment — validate_treatment","title":"Returns results of validation tests for Treatment — validate_treatment","text":"function runs validation tests examine treatment initiated diagnosis influences exacerbation rates COPD patients. compares exacerbation rates diagnosed undiagnosed patients assesses impact treatment.","code":""},{"path":"/reference/validate_treatment.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Returns results of validation tests for Treatment — validate_treatment","text":"","code":"validate_treatment(n_sim = 10000)"},{"path":"/reference/validate_treatment.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Returns results of validation tests for Treatment — validate_treatment","text":"n_sim number agents","code":""},{"path":"/reference/validate_treatment.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns results of validation tests for Treatment — validate_treatment","text":"validation test results","code":""}]
