<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Getting Started with EPIC • epicR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started with EPIC">
<style>
/* Event table styles */
.event-table table {
    width: 100%;
    border-collapse: collapse;
    margin: 20px 0;
    font-size: 1em;
    font-family: Arial, sans-serif;
    text-align: left;
    border: none;
}
.event-table table th {
    background-color: #f3f4f5;
    font-weight: bold;
    border-bottom: 3px solid #333;
    padding: 10px;
}
.event-table table td {
    padding: 8px;
}
.event-table table tr:nth-child(even) {
    background-color: #f3f4f5;
}
.event-table table tr:nth-child(odd) {
    background-color: #ffffff;
}

/* Dropdown table styles */
.custom-table-container-dropdown table {
    width: 100%;
    table-layout: fixed;
    border-collapse: collapse;
    margin: 20px 0;
    font-size: 1em;
    font-family: Arial, sans-serif;
    text-align: left;
    border: 1px solid #ddd;
}
.custom-table-container-dropdown table th {
    background-color: #f3f4f5;
    font-weight: bold;
    border-bottom: 3px solid #333;
    padding: 10px;
    text-align: left;
}
.custom-table-container-dropdown table td {
    padding: 8px;
}
.btn-primary {
    color: #fff;
    background-color: #007bff;
    border: none;
    padding: 5px 10px;
    font-size: 0.9em;
    cursor: pointer;
    border-radius: 3px;
}
.btn-primary:hover {
    background-color: #0056b3;
}
.custom-collapse {
    margin-top: 10px;
    padding: 10px;
    border: 1px solid #ddd;
    background-color: #f9f9f9;
    display: none;
}
.custom-collapse.show {
    display: block;
}

/* General table styles */
.custom-table-container table {
    width: 100%;
    border-collapse: collapse;
    margin: 20px 0;
    font-size: 1em;
    font-family: Arial, sans-serif;
    text-align: left;
    border: 1px solid #ddd;
}
.custom-table-container table th {
    background-color: #f3f4f5;
    font-weight: bold;
    border-bottom: 3px solid #333;
    padding: 10px;
    text-align: left;
}
.custom-table-container table td {
    padding: 8px;
    border-bottom: 1px solid #ddd;
}
.custom-table-container table tr:nth-child(even) {
    background-color: #f9f9f9;
}
.custom-table-container table tr:nth-child(odd) {
    background-color: #ffffff;
}
.custom-table-container table tr:hover {
    background-color: #b780ff;
}
</style>
<script>
document.addEventListener('DOMContentLoaded', function() {
  document.querySelectorAll('.btn-primary').forEach(function(button) {
    button.addEventListener('click', function() {
      var target = document.querySelector(button.getAttribute('data-target'));
      if (target) {
        target.classList.toggle('show');
      }
    });
  });
});
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">epicR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.40.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/AddingNewCountry.html">Adding a New Country to epicR</a></li>
    <li><a class="dropdown-item" href="../articles/BackgroundEPIC.html">EPIC Background</a></li>
    <li><a class="dropdown-item" href="../articles/GettingStarted.html">Getting Started with EPIC</a></li>
    <li><a class="dropdown-item" href="../articles/RecalibratingEPIC.html">RecalibratingEPIC</a></li>
    <li><a class="dropdown-item" href="../articles/UsingEPICinR.html">Using EPIC in R</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Getting Started with EPIC</h1>
            
      

      <div class="d-none name"><code>GettingStarted.Rmd</code></div>
    </div>

    
    
<p>This document is a guide to basics of running a simulation with the
Evaluation Platform in COPD (EPIC) using epicR.</p>
<p>EPIC is a discrete-event simulation model for COPD, and models the
entire pathway of care, from disease incidence, to diagnosis, treatment,
and outcomes.</p>
<p>EPIC simulates random Canadians, known in the model as agents. Agents
have demographic and biological/medical characteristics, including
symptoms.</p>
<p>The operations of the model is controlled with inputs and settings.
The function <code><a href="../reference/get_input.html">get_input()</a></code> returns the default set of inputs,
while <code><a href="../reference/get_default_settings.html">get_default_settings()</a></code> does the same for
settings.</p>
<p>When running the model, the user has the option of changing inputs
and settings.</p>
<p>Let’s go over an example.</p>
<p>First, we need to load the model:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">epicR</span><span class="op">)</span></span></code></pre></div>
<p>EPIC is a session-based model, which means at beginning and end of
our run, we need to open and terminate a session. When a session is
initialized, required memory resources are allocated to the model.</p>
<p>Let’s initialize a session and run the model with default
parameters:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/init_session.html">init_session</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/run.html">run</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Both the <code>init_session</code> and the <code>run</code> functions
are supposed to return 0 if they encounter no error.</p>
<p>Once we ran the model, we probably want to see the results of that
run. The most basic set of results can be retrieved with
<code><a href="../reference/Cget_output.html">Cget_output()</a></code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Cget_output.html">Cget_output</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>These are high-level outcomes of the simulation. We can get more
detailed results with the <code><a href="../reference/Cget_output_ex.html">Cget_output_ex()</a></code> function, which
includes many tables that give results over time horizon of the model.
Note that we should always have to terminate a session after we are done
with it.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results_ex</span><span class="op">&lt;-</span><span class="fu"><a href="../reference/Cget_output_ex.html">Cget_output_ex</a></span><span class="op">(</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">results_ex</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/terminate_session.html">terminate_session</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Here, we managed to run the model with its default inputs and
settings. But what were those inputs? We can explore them using
<code><a href="../reference/get_input.html">get_input()</a></code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">inputs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_input.html">get_input</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">inputs</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">inputs</span><span class="op">$</span><span class="va">values</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">inputs</span><span class="op">$</span><span class="va">values</span><span class="op">$</span><span class="va">global_parameters</span><span class="op">)</span></span>
<span><span class="va">inputs</span><span class="op">$</span><span class="va">values</span><span class="op">$</span><span class="va">global_parameters</span><span class="op">$</span><span class="va">time_horizon</span></span></code></pre></div>
<p>As you can see the example above, input is a list, with values, help,
and references. To change any input, we need to change its value. Help
and references are there to tell us what each input parameter is, and
where did it come from. By changing inputs, we can change parameters
such as time horizon, proportion of female patients, costs and
utilities, as well as many regression equations that are used in the
model.</p>
<p>Similarly, we can retrieve default settings and change them if
necessary. The most useful setting is record_mode, which specifies
whether the model should record outputs as aggregates or at the
individual patient level. If we set record_mode to 2, we can collect
individual patient level data from the model.</p>
<p>In the example below, we call the model with modified inputs and
settings:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">settings</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_default_settings.html">get_default_settings</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">settings</span><span class="op">$</span><span class="va">record_mode</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span><span class="va">settings</span><span class="op">$</span><span class="va">n_base_agents</span> <span class="op">&lt;-</span> <span class="fl">1e4</span></span>
<span><span class="fu"><a href="../reference/init_session.html">init_session</a></span><span class="op">(</span>settings <span class="op">=</span> <span class="va">settings</span><span class="op">)</span></span>
<span></span>
<span><span class="va">input</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_input.html">get_input</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">input</span><span class="op">$</span><span class="va">values</span><span class="op">$</span><span class="va">global_parameters</span><span class="op">$</span><span class="va">time_horizon</span> <span class="op">&lt;-</span> <span class="fl">5</span></span>
<span><span class="fu"><a href="../reference/run.html">run</a></span><span class="op">(</span>input<span class="op">=</span><span class="va">input</span><span class="op">$</span><span class="va">values</span><span class="op">)</span></span>
<span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Cget_output.html">Cget_output</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">events</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu"><a href="../reference/Cget_all_events_matrix.html">Cget_all_events_matrix</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">events</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/terminate_session.html">terminate_session</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Note that you might need a large amount of memory available, if you
want to collect event history for a large number of patients.</p>
<p>In the events data frame, each type of event has a code corresponding
to the table below:</p>
<table class="table">
<thead><tr class="header">
<th>Event</th>
<th>No.</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>start</td>
<td>0</td>
</tr>
<tr class="even">
<td>annual</td>
<td>1</td>
</tr>
<tr class="odd">
<td>birthday</td>
<td>2</td>
</tr>
<tr class="even">
<td>smoking change</td>
<td>3</td>
</tr>
<tr class="odd">
<td>COPD incidence</td>
<td>4</td>
</tr>
<tr class="even">
<td>Exacerbation</td>
<td>5</td>
</tr>
<tr class="odd">
<td>Exacerbation end</td>
<td>6</td>
</tr>
<tr class="even">
<td>Death by Exacerbation</td>
<td>7</td>
</tr>
<tr class="odd">
<td>Doctor visit</td>
<td>8</td>
</tr>
<tr class="even">
<td>Medication change</td>
<td>9</td>
</tr>
<tr class="odd">
<td>Background death</td>
<td>13</td>
</tr>
<tr class="even">
<td>End</td>
<td>14</td>
</tr>
</tbody>
</table>
<p>By default, EPIC is an open population model that captures population
trends such as growth, immigration, and emigration. We can change inputs
to run a closed-cohort analysis, if need be:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">epicR</span><span class="op">)</span></span>
<span><span class="va">input</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_input.html">get_input</a></span><span class="op">(</span>closed_cohort <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">$</span><span class="va">values</span></span>
<span><span class="fu"><a href="../reference/init_session.html">init_session</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/run.html">run</a></span><span class="op">(</span>input<span class="op">=</span><span class="va">input</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/Cget_output.html">Cget_output</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/terminate_session.html">terminate_session</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>These are the basics of running a simulation in EPIC. There are many
other useful functions in the package, including validation functions
that allow the user to check model validation.</p>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mohsen Sadatsafavi, Amin Adibi, Kate Johnson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
